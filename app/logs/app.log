2025-11-12 20:05:53,247 [INFO] app_logger: Запуск сервера
2025-11-12 20:05:53,247 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-12 20:05:53,330 [WARNING] app_logger: Все таблицы удалены.
2025-11-12 20:05:53,330 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-12 20:05:53,344 [INFO] app_logger: Таблицы успешно созданы.
2025-11-12 20:05:53,344 [INFO] app_logger: База готова к работе
2025-11-12 20:05:57,180 [INFO] app_logger: Выключение
2025-11-12 20:08:26,108 [INFO] app_logger: Запуск сервера
2025-11-12 20:08:26,108 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-12 20:08:26,188 [WARNING] app_logger: Все таблицы удалены.
2025-11-12 20:08:26,189 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-12 20:08:26,202 [INFO] app_logger: Таблицы успешно созданы.
2025-11-12 20:08:26,202 [INFO] app_logger: База готова к работе
2025-11-12 20:12:26,359 [INFO] app_logger: Выключение
2025-11-12 20:12:32,756 [INFO] app_logger: Запуск сервера
2025-11-12 20:12:32,756 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-12 20:12:32,844 [WARNING] app_logger: Все таблицы удалены.
2025-11-12 20:12:32,844 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-12 20:12:32,857 [INFO] app_logger: Таблицы успешно созданы.
2025-11-12 20:12:32,857 [INFO] app_logger: База готова к работе
2025-11-12 20:26:17,916 [INFO] app_logger: Выключение
2025-11-12 20:26:18,838 [INFO] app_logger: Запуск сервера
2025-11-12 20:26:18,838 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-12 20:26:18,919 [WARNING] app_logger: Все таблицы удалены.
2025-11-12 20:26:18,919 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-12 20:26:18,935 [INFO] app_logger: Таблицы успешно созданы.
2025-11-12 20:26:18,935 [INFO] app_logger: База готова к работе
2025-11-12 20:27:59,759 [INFO] app_logger: Выключение
2025-11-12 20:33:59,051 [INFO] app_logger: Запуск сервера
2025-11-12 20:33:59,051 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-12 20:33:59,131 [WARNING] app_logger: Все таблицы удалены.
2025-11-12 20:33:59,132 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-12 20:33:59,151 [INFO] app_logger: Таблицы успешно созданы.
2025-11-12 20:33:59,151 [INFO] app_logger: База готова к работе
2025-11-13 17:22:00,745 [INFO] app_logger: Запуск сервера
2025-11-13 17:22:00,745 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 17:22:00,848 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 17:22:00,848 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 17:22:00,864 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 17:22:00,865 [INFO] app_logger: База готова к работе
2025-11-13 17:35:01,722 [INFO] app_logger: Запуск сервера
2025-11-13 17:35:01,722 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 17:35:01,801 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 17:35:01,802 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 17:35:01,815 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 17:35:01,815 [INFO] app_logger: База готова к работе
2025-11-13 17:36:01,671 [INFO] app_logger: Запуск сервера
2025-11-13 17:36:01,671 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 17:36:01,859 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 17:36:01,859 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 17:36:01,869 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 17:36:01,869 [INFO] app_logger: База готова к работе
2025-11-13 17:37:23,528 [INFO] app_logger: Выключение
2025-11-13 17:37:24,397 [INFO] app_logger: Запуск сервера
2025-11-13 17:37:24,397 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 17:37:24,478 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 17:37:24,478 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 17:37:24,489 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 17:37:24,489 [INFO] app_logger: База готова к работе
2025-11-13 17:39:13,069 [INFO] app_logger: Выключение
2025-11-13 17:39:14,106 [INFO] app_logger: Запуск сервера
2025-11-13 17:39:14,106 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 17:39:14,291 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 17:39:14,291 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 17:39:14,302 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 17:39:14,302 [INFO] app_logger: База готова к работе
2025-11-13 17:49:55,965 [INFO] app_logger: Выключение
2025-11-13 17:58:32,129 [INFO] app_logger: Запуск сервера
2025-11-13 17:58:32,129 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 17:58:32,215 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 17:58:32,215 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 17:58:32,229 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 17:58:32,230 [INFO] app_logger: База готова к работе
2025-11-13 18:02:00,747 [INFO] app_logger: Запуск сервера
2025-11-13 18:02:00,748 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:02:00,827 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:02:00,827 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:02:00,839 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:02:00,840 [INFO] app_logger: База готова к работе
2025-11-13 18:03:56,811 [INFO] app_logger: Выключение
2025-11-13 18:03:57,701 [INFO] app_logger: Запуск сервера
2025-11-13 18:03:57,702 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:03:57,780 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:03:57,780 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:03:57,792 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:03:57,792 [INFO] app_logger: База готова к работе
2025-11-13 18:04:43,531 [INFO] app_logger: Выключение
2025-11-13 18:04:44,518 [INFO] app_logger: Запуск сервера
2025-11-13 18:04:44,518 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:04:44,601 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:04:44,602 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:04:44,616 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:04:44,616 [INFO] app_logger: База готова к работе
2025-11-13 18:04:49,018 [INFO] app_logger: Выключение
2025-11-13 18:04:49,943 [INFO] app_logger: Запуск сервера
2025-11-13 18:04:49,943 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:04:50,024 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:04:50,024 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:04:50,037 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:04:50,037 [INFO] app_logger: База готова к работе
2025-11-13 18:07:15,902 [INFO] app_logger: Выключение
2025-11-13 18:07:16,791 [INFO] app_logger: Запуск сервера
2025-11-13 18:07:16,791 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:07:16,872 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:07:16,873 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:07:16,884 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:07:16,885 [INFO] app_logger: База готова к работе
2025-11-13 18:09:05,316 [INFO] app_logger: Выключение
2025-11-13 18:09:06,150 [INFO] app_logger: Запуск сервера
2025-11-13 18:09:06,150 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:09:06,234 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:09:06,234 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:09:06,247 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:09:06,248 [INFO] app_logger: База готова к работе
2025-11-13 18:09:52,502 [INFO] app_logger: Выключение
2025-11-13 18:09:53,402 [INFO] app_logger: Запуск сервера
2025-11-13 18:09:53,402 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:09:53,584 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:09:53,584 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:09:53,595 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:09:53,595 [INFO] app_logger: База готова к работе
2025-11-13 18:11:53,092 [INFO] app_logger: Выключение
2025-11-13 18:11:53,950 [INFO] app_logger: Запуск сервера
2025-11-13 18:11:53,950 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:11:54,031 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:11:54,032 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:11:54,043 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:11:54,044 [INFO] app_logger: База готова к работе
2025-11-13 18:11:57,322 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:13:07,148 [INFO] app_logger: Выключение
2025-11-13 18:15:27,844 [INFO] app_logger: Запуск сервера
2025-11-13 18:15:27,845 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:15:27,925 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:15:27,926 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:15:27,938 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:15:27,938 [INFO] app_logger: База готова к работе
2025-11-13 18:16:21,628 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:16:21,628 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'datetime_type', 'loc': ('query', 'created_at'), 'msg': 'Input should be a valid datetime', 'input': <factory>}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'datetime_type', 'loc': ('query', 'created_at'), 'msg': 'Input should be a valid datetime', 'input': <factory>}]
2025-11-13 18:19:35,567 [INFO] app_logger: Запуск сервера
2025-11-13 18:19:35,567 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:19:35,649 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:19:35,649 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:19:35,663 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:19:35,663 [INFO] app_logger: База готова к работе
2025-11-13 18:19:45,062 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:25:35,480 [INFO] app_logger: Выключение
2025-11-13 18:25:36,405 [INFO] app_logger: Запуск сервера
2025-11-13 18:25:36,405 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:25:36,604 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:25:36,604 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:25:36,619 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:25:36,619 [INFO] app_logger: База готова к работе
2025-11-13 18:25:49,711 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:26:15,002 [INFO] app_logger: Выключение
2025-11-13 18:26:15,948 [INFO] app_logger: Запуск сервера
2025-11-13 18:26:15,948 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:26:16,137 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:26:16,137 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:26:16,148 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:26:16,148 [INFO] app_logger: База готова к работе
2025-11-13 18:26:21,325 [INFO] app_logger: Выключение
2025-11-13 18:26:22,306 [INFO] app_logger: Запуск сервера
2025-11-13 18:26:22,306 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:26:22,387 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:26:22,387 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:26:22,399 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:26:22,399 [INFO] app_logger: База готова к работе
2025-11-13 18:27:14,368 [INFO] app_logger: Выключение
2025-11-13 18:27:15,215 [INFO] app_logger: Запуск сервера
2025-11-13 18:27:15,215 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:27:15,400 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:27:15,400 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:27:15,411 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:27:15,411 [INFO] app_logger: База готова к работе
2025-11-13 18:27:23,046 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:27:23,047 [ERROR] app_logger: Ошибка при создании сессии: print() argument after ** must be a mapping, not QuestionSchemas
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 18, in add_question
    print(**question_data)
    ~~~~~^^^^^^^^^^^^^^^^^
TypeError: print() argument after ** must be a mapping, not QuestionSchemas
2025-11-13 18:27:33,586 [INFO] app_logger: Выключение
2025-11-13 18:27:34,432 [INFO] app_logger: Запуск сервера
2025-11-13 18:27:34,432 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:27:34,514 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:27:34,514 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:27:34,526 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:27:34,526 [INFO] app_logger: База готова к работе
2025-11-13 18:27:37,285 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:27:37,286 [ERROR] app_logger: Ошибка при создании сессии: 'QuestionSchemas' object is not callable
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = question_data(cls.model)
TypeError: 'QuestionSchemas' object is not callable
2025-11-13 18:27:45,634 [INFO] app_logger: Выключение
2025-11-13 18:27:46,499 [INFO] app_logger: Запуск сервера
2025-11-13 18:27:46,499 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:27:46,580 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:27:46,581 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:27:46,594 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:27:46,594 [INFO] app_logger: База готова к работе
2025-11-13 18:27:48,594 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:27:48,594 [ERROR] app_logger: Ошибка при создании сессии: 'QuestionSchemas' object is not callable
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = question_data(cls.model)
TypeError: 'QuestionSchemas' object is not callable
2025-11-13 18:28:13,673 [INFO] app_logger: Выключение
2025-11-13 18:28:17,415 [INFO] app_logger: Запуск сервера
2025-11-13 18:28:17,415 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:28:17,499 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:28:17,499 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:28:17,511 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:28:17,512 [INFO] app_logger: База готова к работе
2025-11-13 18:28:25,359 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:28:25,359 [ERROR] app_logger: Ошибка при создании сессии: 'QuestionSchemas' object is not callable
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = question_data(cls.model)
TypeError: 'QuestionSchemas' object is not callable
2025-11-13 18:29:10,375 [INFO] app_logger: Выключение
2025-11-13 18:29:11,230 [INFO] app_logger: Запуск сервера
2025-11-13 18:29:11,230 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:29:11,423 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:29:11,423 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:29:11,434 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:29:11,435 [INFO] app_logger: База готова к работе
2025-11-13 18:29:13,328 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:29:13,329 [ERROR] app_logger: Ошибка при создании сессии: app.database.models.QuestionModels() argument after ** must be a mapping, not QuestionSchemas
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**question_data)
TypeError: app.database.models.QuestionModels() argument after ** must be a mapping, not QuestionSchemas
2025-11-13 18:30:05,915 [INFO] app_logger: Выключение
2025-11-13 18:30:06,843 [INFO] app_logger: Запуск сервера
2025-11-13 18:30:06,844 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:30:06,932 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:30:06,933 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:30:06,945 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:30:06,945 [INFO] app_logger: База готова к работе
2025-11-13 18:30:07,170 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:30:19,469 [INFO] app_logger: Выключение
2025-11-13 18:30:20,338 [INFO] app_logger: Запуск сервера
2025-11-13 18:30:20,338 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:30:20,521 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:30:20,521 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:30:20,533 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:30:20,533 [INFO] app_logger: База готова к работе
2025-11-13 18:30:22,200 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:30:43,780 [INFO] app_logger: Выключение
2025-11-13 18:30:45,175 [INFO] app_logger: Запуск сервера
2025-11-13 18:30:45,176 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:30:45,361 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:30:45,361 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:30:45,375 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:30:45,375 [INFO] app_logger: База готова к работе
2025-11-13 18:30:49,337 [INFO] app_logger: Выключение
2025-11-13 18:30:50,267 [INFO] app_logger: Запуск сервера
2025-11-13 18:30:50,267 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:30:50,357 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:30:50,357 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:30:50,372 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:30:50,372 [INFO] app_logger: База готова к работе
2025-11-13 18:30:53,686 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:30:53,687 [ERROR] app_logger: Ошибка при создании сессии: type() argument after ** must be a mapping, not QuestionSchemas
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 18, in add_question
    print(type(**question_data))
          ~~~~^^^^^^^^^^^^^^^^^
TypeError: type() argument after ** must be a mapping, not QuestionSchemas
2025-11-13 18:31:23,501 [INFO] app_logger: Выключение
2025-11-13 18:31:24,398 [INFO] app_logger: Запуск сервера
2025-11-13 18:31:24,398 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:31:24,480 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:31:24,480 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:31:24,492 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:31:24,492 [INFO] app_logger: База готова к работе
2025-11-13 18:31:24,851 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:31:24,851 [ERROR] app_logger: Ошибка при создании сессии: app.database.models.QuestionModels() argument after ** must be a mapping, not QuestionSchemas
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 18, in add_question
    question = cls.model(**question_data)
TypeError: app.database.models.QuestionModels() argument after ** must be a mapping, not QuestionSchemas
2025-11-13 18:31:47,539 [INFO] app_logger: Выключение
2025-11-13 18:31:48,391 [INFO] app_logger: Запуск сервера
2025-11-13 18:31:48,391 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:31:48,572 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:31:48,573 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:31:48,583 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:31:48,584 [INFO] app_logger: База готова к работе
2025-11-13 18:32:30,903 [INFO] app_logger: Выключение
2025-11-13 18:32:31,782 [INFO] app_logger: Запуск сервера
2025-11-13 18:32:31,782 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:32:31,865 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:32:31,865 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:32:31,876 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:32:31,877 [INFO] app_logger: База готова к работе
2025-11-13 18:32:33,189 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:32:33,190 [ERROR] app_logger: Ошибка при создании сессии: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1447, in _join_condition
    raise exc.NoForeignKeysError(
    ...<3 lines>...
    )
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'answer' and 'questions'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**q)
  File "<string>", line 4, in __init__
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 515, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4410, in _event_on_init
    instrumenting_mapper._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4218, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4259, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2455, in _determine_joins
    raise sa_exc.NoForeignKeysError(
    ...<7 lines>...
    ) from nfe
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-13 18:33:07,842 [INFO] app_logger: Выключение
2025-11-13 18:33:08,724 [INFO] app_logger: Запуск сервера
2025-11-13 18:33:08,724 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:33:08,911 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:33:08,911 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:33:08,925 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:33:08,925 [INFO] app_logger: База готова к работе
2025-11-13 18:33:09,714 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:33:09,715 [ERROR] app_logger: Ошибка при создании сессии: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1447, in _join_condition
    raise exc.NoForeignKeysError(
    ...<3 lines>...
    )
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'answer' and 'questions'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**q)
  File "<string>", line 4, in __init__
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 515, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4410, in _event_on_init
    instrumenting_mapper._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4218, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4259, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2455, in _determine_joins
    raise sa_exc.NoForeignKeysError(
    ...<7 lines>...
    ) from nfe
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-13 18:33:53,791 [INFO] app_logger: Выключение
2025-11-13 18:33:54,650 [INFO] app_logger: Запуск сервера
2025-11-13 18:33:54,650 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:33:54,732 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:33:54,733 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:33:54,744 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:33:54,744 [INFO] app_logger: База готова к работе
2025-11-13 18:34:46,505 [INFO] app_logger: Выключение
2025-11-13 18:34:47,382 [INFO] app_logger: Запуск сервера
2025-11-13 18:34:47,382 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:34:47,462 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:34:47,462 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:34:47,473 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:34:47,474 [INFO] app_logger: База готова к работе
2025-11-13 18:34:54,051 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:34:54,052 [ERROR] app_logger: Ошибка при создании сессии: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1447, in _join_condition
    raise exc.NoForeignKeysError(
    ...<3 lines>...
    )
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'answer' and 'questions'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**q)
  File "<string>", line 4, in __init__
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 515, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4410, in _event_on_init
    instrumenting_mapper._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4218, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4259, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2455, in _determine_joins
    raise sa_exc.NoForeignKeysError(
    ...<7 lines>...
    ) from nfe
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-13 18:35:13,610 [INFO] app_logger: Выключение
2025-11-13 18:35:14,484 [INFO] app_logger: Запуск сервера
2025-11-13 18:35:14,485 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:35:14,570 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:35:14,570 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:35:14,581 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:35:14,581 [INFO] app_logger: База готова к работе
2025-11-13 18:35:17,657 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:35:17,658 [ERROR] app_logger: Ошибка при создании сессии: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1447, in _join_condition
    raise exc.NoForeignKeysError(
    ...<3 lines>...
    )
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'answer' and 'questions'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**q)
  File "<string>", line 4, in __init__
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 515, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4410, in _event_on_init
    instrumenting_mapper._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4218, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4259, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2455, in _determine_joins
    raise sa_exc.NoForeignKeysError(
    ...<7 lines>...
    ) from nfe
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-13 18:37:33,987 [INFO] app_logger: Выключение
2025-11-13 18:39:22,825 [INFO] app_logger: Запуск сервера
2025-11-13 18:39:22,826 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:39:23,009 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:39:23,010 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:39:23,022 [ERROR] app_logger: Ошибка при создании таблиц: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InvalidForeignKeyError: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
    ~~~~~~~~~~~~~~~~~~~~^
        table,
        ^^^^^^
    ...<2 lines>...
        _is_metadata_operation=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ~~~~~~~~~~~~^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
        dialect,
    ...<4 lines>...
        compiled,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-13 18:39:49,196 [INFO] app_logger: Запуск сервера
2025-11-13 18:39:49,196 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:39:49,269 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:39:49,269 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:39:49,284 [ERROR] app_logger: Ошибка при создании таблиц: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InvalidForeignKeyError: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
    ~~~~~~~~~~~~~~~~~~~~^
        table,
        ^^^^^^
    ...<2 lines>...
        _is_metadata_operation=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ~~~~~~~~~~~~^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
        dialect,
    ...<4 lines>...
        compiled,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-13 18:41:56,580 [INFO] app_logger: Запуск сервера
2025-11-13 18:41:56,580 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:41:56,762 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:41:56,762 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:41:56,778 [ERROR] app_logger: Ошибка при создании таблиц: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InvalidForeignKeyError: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
    ~~~~~~~~~~~~~~~~~~~~^
        table,
        ^^^^^^
    ...<2 lines>...
        _is_metadata_operation=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ~~~~~~~~~~~~^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
        dialect,
    ...<4 lines>...
        compiled,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-13 18:46:00,322 [INFO] app_logger: Запуск сервера
2025-11-13 18:46:00,323 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:46:00,398 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:46:00,398 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:46:00,413 [ERROR] app_logger: Ошибка при создании таблиц: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InvalidForeignKeyError: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
    ~~~~~~~~~~~~~~~~~~~~^
        table,
        ^^^^^^
    ...<2 lines>...
        _is_metadata_operation=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ~~~~~~~~~~~~^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
        dialect,
    ...<4 lines>...
        compiled,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-13 18:51:45,920 [INFO] app_logger: Запуск сервера
2025-11-13 18:51:45,920 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:51:45,993 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:51:45,994 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:51:45,995 [ERROR] app_logger: Ошибка при создании таблиц: Could not initialize target column for ForeignKey 'answer.question_id' on table 'questions': table 'answer' has no column named 'question_id'
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 962, in visit_metadata
    collection = sort_tables_and_constraints(
        [t for t in tables if self._can_create_table(t)]
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1394, in sort_tables_and_constraints
    dependent_on = fkc.referred_table
                   ^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 4799, in referred_table
    return self.elements[0].column.table
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3238, in _resolve_column
    return self._link_to_col_by_colstring(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        parenttable, table, colname
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3160, in _link_to_col_by_colstring
    raise exc.NoReferencedColumnError(
    ...<6 lines>...
    )
sqlalchemy.exc.NoReferencedColumnError: Could not initialize target column for ForeignKey 'answer.question_id' on table 'questions': table 'answer' has no column named 'question_id'
2025-11-13 18:56:25,097 [INFO] app_logger: Запуск сервера
2025-11-13 18:56:25,097 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:56:25,171 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:56:25,171 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:56:25,187 [ERROR] app_logger: Ошибка при создании таблиц: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InvalidForeignKeyError: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
    ~~~~~~~~~~~~~~~~~~~~^
        table,
        ^^^^^^
    ...<2 lines>...
        _is_metadata_operation=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ~~~~~~~~~~~~^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
        dialect,
    ...<4 lines>...
        compiled,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: в целевой внешней таблице "answer" нет ограничения уникальности, соответствующего данным ключам
[SQL: 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	text VARCHAR(255) NOT NULL, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(id) REFERENCES answer (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-13 18:56:38,312 [INFO] app_logger: Запуск сервера
2025-11-13 18:56:38,313 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:56:38,387 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:56:38,387 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:56:38,389 [ERROR] app_logger: Ошибка при создании таблиц: Could not initialize target column for ForeignKey 'answer.question_id' on table 'questions': table 'answer' has no column named 'question_id'
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 40, in create_table
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2459, in _run_ddl_visitor
    ).traverse_single(element)
      ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 962, in visit_metadata
    collection = sort_tables_and_constraints(
        [t for t in tables if self._can_create_table(t)]
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1394, in sort_tables_and_constraints
    dependent_on = fkc.referred_table
                   ^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 4799, in referred_table
    return self.elements[0].column.table
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3238, in _resolve_column
    return self._link_to_col_by_colstring(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        parenttable, table, colname
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3160, in _link_to_col_by_colstring
    raise exc.NoReferencedColumnError(
    ...<6 lines>...
    )
sqlalchemy.exc.NoReferencedColumnError: Could not initialize target column for ForeignKey 'answer.question_id' on table 'questions': table 'answer' has no column named 'question_id'
2025-11-13 18:58:07,247 [INFO] app_logger: Запуск сервера
2025-11-13 18:58:07,248 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 18:58:07,319 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 18:58:07,319 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 18:58:07,333 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 18:58:07,333 [INFO] app_logger: База готова к работе
2025-11-13 18:59:56,861 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 18:59:56,863 [ERROR] app_logger: Ошибка при создании сессии: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1447, in _join_condition
    raise exc.NoForeignKeysError(
    ...<3 lines>...
    )
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'answer' and 'questions'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**q)
  File "<string>", line 4, in __init__
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 515, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4410, in _event_on_init
    instrumenting_mapper._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4218, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4259, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2455, in _determine_joins
    raise sa_exc.NoForeignKeysError(
    ...<7 lines>...
    ) from nfe
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship AnswerModels.question_id - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-13 19:11:34,570 [INFO] app_logger: Запуск сервера
2025-11-13 19:11:34,571 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:11:34,672 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:11:34,672 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:11:34,691 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:11:34,691 [INFO] app_logger: База готова к работе
2025-11-13 19:11:39,659 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:11:39,661 [ERROR] app_logger: Ошибка при создании сессии: Mapper 'Mapper[QuestionModels(questions)]' has no property 'answer'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2522, in get_property
    return self._props[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'answer'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 23, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 19, in add_question
    question = cls.model(**q)
  File "<string>", line 4, in __init__
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 515, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4410, in _event_on_init
    instrumenting_mapper._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4218, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4259, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1660, in do_init
    self._generate_backref()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2144, in _generate_backref
    self._add_reverse_property(self.back_populates)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1591, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2524, in get_property
    raise sa_exc.InvalidRequestError(
    ...<3 lines>...
    ) from err
sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[QuestionModels(questions)]' has no property 'answer'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-13 19:12:26,464 [INFO] app_logger: Выключение
2025-11-13 19:12:27,340 [INFO] app_logger: Запуск сервера
2025-11-13 19:12:27,340 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:12:27,530 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:12:27,530 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:12:27,544 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:12:27,545 [INFO] app_logger: База готова к работе
2025-11-13 19:12:30,850 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:14:03,739 [INFO] app_logger: Выключение
2025-11-13 19:14:04,710 [INFO] app_logger: Запуск сервера
2025-11-13 19:14:04,710 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:14:04,790 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:14:04,791 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:14:04,804 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:14:04,804 [INFO] app_logger: База готова к работе
2025-11-13 19:14:09,083 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:14:50,053 [INFO] app_logger: Выключение
2025-11-13 19:14:50,950 [INFO] app_logger: Запуск сервера
2025-11-13 19:14:50,950 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:14:51,033 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:14:51,034 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:14:51,047 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:14:51,048 [INFO] app_logger: База готова к работе
2025-11-13 19:14:53,797 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:16:40,262 [INFO] app_logger: Выключение
2025-11-13 19:16:41,171 [INFO] app_logger: Запуск сервера
2025-11-13 19:16:41,171 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:16:41,257 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:16:41,257 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:16:41,270 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:16:41,271 [INFO] app_logger: База готова к работе
2025-11-13 19:18:13,897 [INFO] app_logger: Выключение
2025-11-13 19:18:14,800 [INFO] app_logger: Запуск сервера
2025-11-13 19:18:14,800 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:18:14,988 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:18:14,988 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:18:15,001 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:18:15,001 [INFO] app_logger: База готова к работе
2025-11-13 19:19:26,996 [INFO] app_logger: Выключение
2025-11-13 19:19:27,883 [INFO] app_logger: Запуск сервера
2025-11-13 19:19:27,884 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:19:28,064 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:19:28,064 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:19:28,079 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:19:28,079 [INFO] app_logger: База готова к работе
2025-11-13 19:19:38,518 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:20:52,476 [INFO] app_logger: Выключение
2025-11-13 19:20:53,389 [INFO] app_logger: Запуск сервера
2025-11-13 19:20:53,389 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:20:53,475 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:20:53,475 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:20:53,489 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:20:53,489 [INFO] app_logger: База готова к работе
2025-11-13 19:20:55,363 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:21:28,260 [INFO] app_logger: Выключение
2025-11-13 19:21:58,796 [INFO] app_logger: Запуск сервера
2025-11-13 19:21:58,796 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:21:58,875 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:21:58,875 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:21:58,887 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:21:58,888 [INFO] app_logger: База готова к работе
2025-11-13 19:27:53,361 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:28:14,812 [INFO] app_logger: Запуск сервера
2025-11-13 19:28:14,812 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:28:14,895 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:28:14,895 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:28:14,910 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:28:14,910 [INFO] app_logger: База готова к работе
2025-11-13 19:28:26,032 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:32:11,482 [INFO] app_logger: Выключение
2025-11-13 19:32:12,390 [INFO] app_logger: Запуск сервера
2025-11-13 19:32:12,390 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:32:12,473 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:32:12,473 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:32:12,489 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:32:12,489 [INFO] app_logger: База готова к работе
2025-11-13 19:32:20,717 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:35:02,595 [INFO] app_logger: Выключение
2025-11-13 19:35:03,545 [INFO] app_logger: Запуск сервера
2025-11-13 19:35:03,545 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:35:03,626 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:35:03,626 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:35:03,640 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:35:03,640 [INFO] app_logger: База готова к работе
2025-11-13 19:35:06,307 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:35:35,079 [INFO] app_logger: Выключение
2025-11-13 19:35:35,967 [INFO] app_logger: Запуск сервера
2025-11-13 19:35:35,967 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:35:36,046 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:35:36,047 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:35:36,060 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:35:36,061 [INFO] app_logger: База готова к работе
2025-11-13 19:40:21,641 [INFO] app_logger: Выключение
2025-11-13 19:40:22,546 [INFO] app_logger: Запуск сервера
2025-11-13 19:40:22,546 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:40:22,629 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:40:22,630 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:40:22,648 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:40:22,648 [INFO] app_logger: База готова к работе
2025-11-13 19:40:49,448 [INFO] app_logger: Выключение
2025-11-13 19:40:50,316 [INFO] app_logger: Запуск сервера
2025-11-13 19:40:50,316 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:40:50,397 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:40:50,398 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:40:50,412 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:40:50,412 [INFO] app_logger: База готова к работе
2025-11-13 19:44:50,097 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:47:29,590 [INFO] app_logger: Выключение
2025-11-13 19:47:30,492 [INFO] app_logger: Запуск сервера
2025-11-13 19:47:30,493 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:47:30,578 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:47:30,578 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:47:30,594 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:47:30,594 [INFO] app_logger: База готова к работе
2025-11-13 19:47:40,336 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:47:40,343 [ERROR] app_logger: Ошибка при создании сессии: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "created_at" отношения "questions" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, f, null).
[SQL: INSERT INTO questions (text, created_at) VALUES ($1::VARCHAR, $2::TIMESTAMP WITHOUT TIME ZONE) RETURNING questions.id]
[parameters: ('f', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.NotNullViolationError: значение NULL в столбце "created_at" отношения "questions" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, f, null).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "created_at" отношения "questions" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, f, null).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 22, in add_questions
    return await QuestionDAO.add_question(question_data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 22, in add_question
    await session.commit()
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "created_at" отношения "questions" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, f, null).
[SQL: INSERT INTO questions (text, created_at) VALUES ($1::VARCHAR, $2::TIMESTAMP WITHOUT TIME ZONE) RETURNING questions.id]
[parameters: ('f', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-13 19:48:56,265 [INFO] app_logger: Выключение
2025-11-13 19:48:57,310 [INFO] app_logger: Запуск сервера
2025-11-13 19:48:57,310 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:48:57,495 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:48:57,496 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:48:57,511 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:48:57,511 [INFO] app_logger: База готова к работе
2025-11-13 19:49:00,022 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:50:39,625 [INFO] app_logger: Выключение
2025-11-13 19:50:40,584 [INFO] app_logger: Запуск сервера
2025-11-13 19:50:40,584 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:50:40,690 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:50:40,690 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:50:40,704 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:50:40,705 [INFO] app_logger: База готова к работе
2025-11-13 19:53:07,670 [INFO] app_logger: Выключение
2025-11-13 19:53:08,549 [INFO] app_logger: Запуск сервера
2025-11-13 19:53:08,549 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:53:08,629 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:53:08,629 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:53:08,644 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:53:08,644 [INFO] app_logger: База готова к работе
2025-11-13 19:53:19,111 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:53:57,032 [INFO] app_logger: Выключение
2025-11-13 19:53:57,899 [INFO] app_logger: Запуск сервера
2025-11-13 19:53:57,900 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:53:57,991 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:53:57,991 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:53:58,004 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:53:58,004 [INFO] app_logger: База готова к работе
2025-11-13 19:54:04,772 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:54:04,779 [ERROR] app_logger: Ошибка при создании сессии: 'ChunkedIteratorResult' object has no attribute 'scallars'
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 16, in get_all_questions
    return await QuestionDAO.all_questions(session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 16, in all_questions
    return result.scallars().all()
           ^^^^^^^^^^^^^^^
AttributeError: 'ChunkedIteratorResult' object has no attribute 'scallars'. Did you mean: 'scalars'?
2025-11-13 19:54:20,642 [INFO] app_logger: Выключение
2025-11-13 19:54:21,566 [INFO] app_logger: Запуск сервера
2025-11-13 19:54:21,566 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 19:54:21,647 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 19:54:21,647 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 19:54:21,662 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 19:54:21,662 [INFO] app_logger: База готова к работе
2025-11-13 19:54:23,968 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:54:33,209 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 19:54:36,428 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:02:11,773 [INFO] app_logger: Выключение
2025-11-13 20:02:12,696 [INFO] app_logger: Запуск сервера
2025-11-13 20:02:12,697 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:02:12,777 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:02:12,777 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:02:12,791 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:02:12,791 [INFO] app_logger: База готова к работе
2025-11-13 20:06:59,473 [INFO] app_logger: Выключение
2025-11-13 20:07:00,359 [INFO] app_logger: Запуск сервера
2025-11-13 20:07:00,359 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:07:00,440 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:07:00,440 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:07:00,455 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:07:00,455 [INFO] app_logger: База готова к работе
2025-11-13 20:08:03,638 [INFO] app_logger: Выключение
2025-11-13 20:08:04,521 [INFO] app_logger: Запуск сервера
2025-11-13 20:08:04,521 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:08:04,609 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:08:04,609 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:08:04,621 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:08:04,621 [INFO] app_logger: База готова к работе
2025-11-13 20:09:38,682 [INFO] app_logger: Выключение
2025-11-13 20:09:39,573 [INFO] app_logger: Запуск сервера
2025-11-13 20:09:39,573 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:09:39,656 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:09:39,656 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:09:39,671 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:09:39,671 [INFO] app_logger: База готова к работе
2025-11-13 20:09:50,334 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:10:44,737 [INFO] app_logger: Выключение
2025-11-13 20:10:45,591 [INFO] app_logger: Запуск сервера
2025-11-13 20:10:45,591 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:10:45,674 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:10:45,674 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:10:45,687 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:10:45,687 [INFO] app_logger: База готова к работе
2025-11-13 20:11:23,389 [INFO] app_logger: Выключение
2025-11-13 20:11:24,278 [INFO] app_logger: Запуск сервера
2025-11-13 20:11:24,279 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:11:24,370 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:11:24,371 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:11:24,385 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:11:24,385 [INFO] app_logger: База готова к работе
2025-11-13 20:11:57,068 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:11:57,068 [ERROR] app_logger: Ошибка при создании сессии: AnswerDAO.create_answer() missing 1 required positional argument: 'session'
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 16, in add_answer
    return await AnswerDAO.create_answer(data, session)
                 ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
TypeError: AnswerDAO.create_answer() missing 1 required positional argument: 'session'
2025-11-13 20:13:29,118 [INFO] app_logger: Выключение
2025-11-13 20:13:30,091 [INFO] app_logger: Запуск сервера
2025-11-13 20:13:30,091 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:13:30,171 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:13:30,171 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:13:30,185 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:13:30,186 [INFO] app_logger: База готова к работе
2025-11-13 20:13:31,286 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:14:27,758 [INFO] app_logger: Выключение
2025-11-13 20:14:28,636 [INFO] app_logger: Запуск сервера
2025-11-13 20:14:28,637 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:14:28,726 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:14:28,726 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:14:28,741 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:14:28,741 [INFO] app_logger: База готова к работе
2025-11-13 20:14:30,408 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:14:46,022 [INFO] app_logger: Выключение
2025-11-13 20:14:46,909 [INFO] app_logger: Запуск сервера
2025-11-13 20:14:46,909 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:14:46,990 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:14:46,991 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:14:47,005 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:14:47,005 [INFO] app_logger: База готова к работе
2025-11-13 20:14:48,318 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:15:13,597 [INFO] app_logger: Выключение
2025-11-13 20:15:14,714 [INFO] app_logger: Запуск сервера
2025-11-13 20:15:14,714 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:15:14,793 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:15:14,793 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:15:14,808 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:15:14,808 [INFO] app_logger: База готова к работе
2025-11-13 20:16:12,895 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:16:53,787 [INFO] app_logger: Выключение
2025-11-13 20:16:54,665 [INFO] app_logger: Запуск сервера
2025-11-13 20:16:54,665 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:16:54,750 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:16:54,751 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:16:54,765 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:16:54,766 [INFO] app_logger: База готова к работе
2025-11-13 20:16:55,482 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:17:56,684 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:18:19,177 [INFO] app_logger: Выключение
2025-11-13 20:18:20,068 [INFO] app_logger: Запуск сервера
2025-11-13 20:18:20,068 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:18:20,160 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:18:20,160 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:18:20,175 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:18:20,175 [INFO] app_logger: База готова к работе
2025-11-13 20:18:34,082 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:19:23,040 [INFO] app_logger: Выключение
2025-11-13 20:19:23,949 [INFO] app_logger: Запуск сервера
2025-11-13 20:19:23,949 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:19:24,034 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:19:24,035 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:19:24,047 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:19:24,047 [INFO] app_logger: База готова к работе
2025-11-13 20:19:32,380 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:19:43,166 [INFO] app_logger: Выключение
2025-11-13 20:19:44,060 [INFO] app_logger: Запуск сервера
2025-11-13 20:19:44,060 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:19:44,140 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:19:44,141 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:19:44,154 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:19:44,154 [INFO] app_logger: База готова к работе
2025-11-13 20:19:44,636 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:20:21,840 [INFO] app_logger: Выключение
2025-11-13 20:20:22,720 [INFO] app_logger: Запуск сервера
2025-11-13 20:20:22,720 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:20:22,814 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:20:22,814 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:20:22,827 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:20:22,827 [INFO] app_logger: База готова к работе
2025-11-13 20:20:32,608 [INFO] app_logger: Выключение
2025-11-13 20:20:33,498 [INFO] app_logger: Запуск сервера
2025-11-13 20:20:33,499 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:20:33,582 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:20:33,583 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:20:33,597 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:20:33,597 [INFO] app_logger: База готова к работе
2025-11-13 20:20:33,879 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:21:06,540 [INFO] app_logger: Выключение
2025-11-13 20:21:07,410 [INFO] app_logger: Запуск сервера
2025-11-13 20:21:07,410 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:21:07,498 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:21:07,499 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:21:07,512 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:21:07,513 [INFO] app_logger: База готова к работе
2025-11-13 20:21:09,004 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:22:15,010 [INFO] app_logger: Выключение
2025-11-13 20:22:15,897 [INFO] app_logger: Запуск сервера
2025-11-13 20:22:15,897 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:22:15,985 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:22:15,985 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:22:16,000 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:22:16,000 [INFO] app_logger: База готова к работе
2025-11-13 20:22:17,671 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:22:39,491 [INFO] app_logger: Выключение
2025-11-13 20:22:40,371 [INFO] app_logger: Запуск сервера
2025-11-13 20:22:40,372 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:22:40,453 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:22:40,453 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:22:40,467 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:22:40,467 [INFO] app_logger: База готова к работе
2025-11-13 20:22:42,214 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:24:51,027 [INFO] app_logger: Выключение
2025-11-13 20:24:51,938 [INFO] app_logger: Запуск сервера
2025-11-13 20:24:51,938 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:24:52,021 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:24:52,021 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:24:52,036 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:24:52,036 [INFO] app_logger: База готова к работе
2025-11-13 20:27:43,403 [INFO] app_logger: Выключение
2025-11-13 20:27:44,363 [INFO] app_logger: Запуск сервера
2025-11-13 20:27:44,363 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-13 20:27:44,444 [WARNING] app_logger: Все таблицы удалены.
2025-11-13 20:27:44,444 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-13 20:27:44,460 [INFO] app_logger: Таблицы успешно созданы.
2025-11-13 20:27:44,461 [INFO] app_logger: База готова к работе
2025-11-13 20:28:41,016 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-13 20:32:25,777 [INFO] app_logger: Выключение
2025-11-14 11:57:18,598 [INFO] app_logger: Запуск сервера
2025-11-14 11:57:18,599 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 11:57:18,804 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 11:57:18,804 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 11:57:18,819 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 11:57:18,819 [INFO] app_logger: База готова к работе
2025-11-14 11:57:34,566 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:00:21,712 [INFO] app_logger: Выключение
2025-11-14 12:00:22,728 [INFO] app_logger: Запуск сервера
2025-11-14 12:00:22,728 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:00:22,920 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:00:22,920 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:00:22,934 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:00:22,934 [INFO] app_logger: База готова к работе
2025-11-14 12:02:07,696 [INFO] app_logger: Выключение
2025-11-14 12:02:08,621 [INFO] app_logger: Запуск сервера
2025-11-14 12:02:08,621 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:02:08,708 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:02:08,708 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:02:08,723 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:02:08,723 [INFO] app_logger: База готова к работе
2025-11-14 12:10:03,899 [INFO] app_logger: Выключение
2025-11-14 12:10:44,870 [INFO] app_logger: Запуск сервера
2025-11-14 12:10:44,870 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:10:45,070 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:10:45,070 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:10:45,088 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:10:45,089 [INFO] app_logger: База готова к работе
2025-11-14 12:15:13,743 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:15:13,750 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 17, in add_answer
    return await AnswerDAO.create_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 18, in create_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 12:16:13,181 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:16:33,271 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:18:54,184 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:19:13,845 [INFO] app_logger: Запуск сервера
2025-11-14 12:19:13,845 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:19:13,928 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:19:13,928 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:19:13,944 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:19:13,944 [INFO] app_logger: База готова к работе
2025-11-14 12:19:18,557 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:19:21,448 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:21:20,858 [INFO] app_logger: Выключение
2025-11-14 12:21:21,760 [INFO] app_logger: Запуск сервера
2025-11-14 12:21:21,761 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:21:21,844 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:21:21,845 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:21:21,859 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:21:21,859 [INFO] app_logger: База готова к работе
2025-11-14 12:22:02,317 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:22:04,381 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:22:40,987 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:32:50,366 [INFO] app_logger: Выключение
2025-11-14 12:38:58,369 [INFO] app_logger: Запуск сервера
2025-11-14 12:38:58,369 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:38:58,455 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:38:58,455 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:38:58,469 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:38:58,470 [INFO] app_logger: База готова к работе
2025-11-14 12:39:39,455 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:39:56,337 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:40:06,978 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:40:06,979 [ERROR] app_logger: Ошибка при создании сессии: AnswerDAO.get_answer_by_id() missing 2 required positional arguments: 'id' and 'session'
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id()
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: AnswerDAO.get_answer_by_id() missing 2 required positional arguments: 'id' and 'session'
2025-11-14 12:40:42,963 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:40:42,963 [ERROR] app_logger: Ошибка при создании сессии: AnswerDAO.get_answer_by_id() missing 2 required positional arguments: 'id' and 'session'
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AnswerDAO.get_answer_by_id() missing 2 required positional arguments: 'id' and 'session'
2025-11-14 12:40:56,834 [INFO] app_logger: Запуск сервера
2025-11-14 12:40:56,834 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:40:57,028 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:40:57,028 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:40:57,042 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:40:57,043 [INFO] app_logger: База готова к работе
2025-11-14 12:41:00,424 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:02,732 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:05,761 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:44,869 [INFO] app_logger: Выключение
2025-11-14 12:41:45,755 [INFO] app_logger: Запуск сервера
2025-11-14 12:41:45,755 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:41:45,845 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:41:45,845 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:41:45,859 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:41:45,859 [INFO] app_logger: База готова к работе
2025-11-14 12:41:48,277 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:48,283 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 33, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 12:41:52,421 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:54,502 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:57,643 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:41:57,645 [ERROR] app_logger: Ошибка при создании сессии: This result object is closed.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    return result.scalar_one()
           ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1469, in scalar_one
    return self._only_one_row(
           ~~~~~~~~~~~~~~~~~~^
        raise_for_second_row=True, raise_for_none=True, scalar=True
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 757, in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2262, in _fetchone_impl
    self._raise_hard_closed()
    ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2248, in _raise_hard_closed
    raise exc.ResourceClosedError("This result object is closed.")
sqlalchemy.exc.ResourceClosedError: This result object is closed.
2025-11-14 12:42:20,506 [INFO] app_logger: Выключение
2025-11-14 12:42:21,625 [INFO] app_logger: Запуск сервера
2025-11-14 12:42:21,625 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:42:21,818 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:42:21,818 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:42:21,830 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:42:21,830 [INFO] app_logger: База готова к работе
2025-11-14 12:42:36,241 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:42:38,048 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:42:40,604 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:42:40,607 [ERROR] app_logger: Ошибка при создании сессии: This result object is closed.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    return result.scalar()
           ~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1549, in scalar
    return self._only_one_row(
           ~~~~~~~~~~~~~~~~~~^
        raise_for_second_row=False, raise_for_none=False, scalar=True
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 757, in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2262, in _fetchone_impl
    self._raise_hard_closed()
    ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2248, in _raise_hard_closed
    raise exc.ResourceClosedError("This result object is closed.")
sqlalchemy.exc.ResourceClosedError: This result object is closed.
2025-11-14 12:42:45,333 [INFO] app_logger: Выключение
2025-11-14 12:42:53,144 [INFO] app_logger: Запуск сервера
2025-11-14 12:42:53,144 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:42:53,227 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:42:53,228 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:42:53,241 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:42:53,241 [INFO] app_logger: База готова к работе
2025-11-14 12:43:06,083 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:43:15,592 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:43:22,001 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:43:22,003 [ERROR] app_logger: Ошибка при создании сессии: This result object is closed.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    return result.scalar()
           ~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1549, in scalar
    return self._only_one_row(
           ~~~~~~~~~~~~~~~~~~^
        raise_for_second_row=False, raise_for_none=False, scalar=True
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 757, in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2262, in _fetchone_impl
    self._raise_hard_closed()
    ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2248, in _raise_hard_closed
    raise exc.ResourceClosedError("This result object is closed.")
sqlalchemy.exc.ResourceClosedError: This result object is closed.
2025-11-14 12:44:03,556 [INFO] app_logger: Выключение
2025-11-14 12:44:04,450 [INFO] app_logger: Запуск сервера
2025-11-14 12:44:04,450 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:44:04,534 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:44:04,534 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:44:04,547 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:44:04,547 [INFO] app_logger: База готова к работе
2025-11-14 12:44:07,353 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:44:09,491 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:44:12,136 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:44:12,138 [ERROR] app_logger: Ошибка при создании сессии: This result object is closed.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    return result.scalar_one_or_none()
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1492, in scalar_one_or_none
    return self._only_one_row(
           ~~~~~~~~~~~~~~~~~~^
        raise_for_second_row=True, raise_for_none=False, scalar=True
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 757, in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2262, in _fetchone_impl
    self._raise_hard_closed()
    ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 2248, in _raise_hard_closed
    raise exc.ResourceClosedError("This result object is closed.")
sqlalchemy.exc.ResourceClosedError: This result object is closed.
2025-11-14 12:48:25,634 [INFO] app_logger: Выключение
2025-11-14 12:48:26,515 [INFO] app_logger: Запуск сервера
2025-11-14 12:48:26,515 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:48:26,598 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:48:26,598 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:48:26,614 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:48:26,614 [INFO] app_logger: База готова к работе
2025-11-14 12:48:39,459 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:48:41,720 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:48:44,842 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:49:10,051 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 12:49:10,053 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 25, in get_answer
    return await AnswerDAO.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 12:54:06,260 [INFO] app_logger: Выключение
2025-11-14 12:54:07,207 [INFO] app_logger: Запуск сервера
2025-11-14 12:54:07,208 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:54:07,400 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:54:07,400 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:54:07,413 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:54:07,413 [INFO] app_logger: База готова к работе
2025-11-14 12:54:23,979 [INFO] app_logger: Выключение
2025-11-14 12:54:25,111 [INFO] app_logger: Запуск сервера
2025-11-14 12:54:25,111 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:54:25,204 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:54:25,204 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:54:25,219 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:54:25,219 [INFO] app_logger: База готова к работе
2025-11-14 12:56:12,359 [INFO] app_logger: Выключение
2025-11-14 12:57:01,249 [INFO] app_logger: Запуск сервера
2025-11-14 12:57:01,249 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 12:57:01,333 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 12:57:01,334 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 12:57:01,350 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 12:57:01,350 [INFO] app_logger: База готова к работе
2025-11-14 12:59:51,573 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:00:03,626 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:00:14,749 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:00:14,756 [ERROR] app_logger: Ошибка при создании сессии: name 'answer' is not defined
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 41, in delete_answer_by_id
    await session.commit()
       ^^^^^^
NameError: name 'answer' is not defined
2025-11-14 13:01:11,378 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:01:11,380 [ERROR] app_logger: Ошибка при создании сессии: name 'answer' is not defined
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 41, in delete_answer_by_id
    await session.commit()
       ^^^^^^
NameError: name 'answer' is not defined
2025-11-14 13:02:33,121 [INFO] app_logger: Запуск сервера
2025-11-14 13:02:33,121 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:02:33,203 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:02:33,203 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:02:33,220 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:02:33,220 [INFO] app_logger: База готова к работе
2025-11-14 13:02:47,625 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:02:54,638 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:05:46,824 [INFO] app_logger: Выключение
2025-11-14 13:05:47,750 [INFO] app_logger: Запуск сервера
2025-11-14 13:05:47,750 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:05:47,836 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:05:47,836 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:05:47,850 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:05:47,850 [INFO] app_logger: База готова к работе
2025-11-14 13:05:50,433 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:05:50,440 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 43, in delete_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 13:06:04,203 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:06:18,451 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:06:43,368 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:06:46,667 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:07:47,351 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:07:47,353 [ERROR] app_logger: Ошибка при создании сессии: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x0000023589033E10>.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 44, in delete_answer_by_id
    await session.execute(delete(answer))
                          ~~~~~~^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\_dml_constructors.py", line 132, in delete
    return Delete(table)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1747, in __init__
    self.table = coercions.expect(
                 ~~~~~~~~~~~~~~~~^
        roles.DMLTableRole, table, apply_propagate_attrs=self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 392, in expect
    impl._raise_for_expected(original_element, argname)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        element,
        ^^^^^^^^
    ...<5 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x0000023589033E10>.
2025-11-14 13:14:44,505 [INFO] app_logger: Выключение
2025-11-14 13:14:45,376 [INFO] app_logger: Запуск сервера
2025-11-14 13:14:45,376 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:14:45,564 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:14:45,564 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:14:45,578 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:14:45,578 [INFO] app_logger: База готова к работе
2025-11-14 13:14:47,933 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:14:47,939 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 39, in delete_answer_by_id
    result = await cls.get_answer_by_id(id, session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 13:14:50,782 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:14:53,428 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:14:55,769 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:14:55,772 [ERROR] app_logger: Ошибка при создании сессии: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x000001D212B49950>.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 40, in delete_answer_by_id
    await session.execute(delete(result).where(cls.model.id == id))
                          ~~~~~~^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\_dml_constructors.py", line 132, in delete
    return Delete(table)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1747, in __init__
    self.table = coercions.expect(
                 ~~~~~~~~~~~~~~~~^
        roles.DMLTableRole, table, apply_propagate_attrs=self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 392, in expect
    impl._raise_for_expected(original_element, argname)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        element,
        ^^^^^^^^
    ...<5 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x000001D212B49950>.
2025-11-14 13:15:03,945 [INFO] app_logger: Выключение
2025-11-14 13:15:08,187 [INFO] app_logger: Запуск сервера
2025-11-14 13:15:08,187 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:15:08,267 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:15:08,267 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:15:08,280 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:15:08,280 [INFO] app_logger: База готова к работе
2025-11-14 13:15:18,335 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:15:18,342 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerDAO.create_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 18, in create_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 13:15:25,065 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:15:28,163 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:15:41,937 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:15:41,939 [ERROR] app_logger: Ошибка при создании сессии: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x0000023DA6B39590>.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 40, in delete_answer_by_id
    await session.execute(delete(result).where(cls.model.id == id))
                          ~~~~~~^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\_dml_constructors.py", line 132, in delete
    return Delete(table)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1747, in __init__
    self.table = coercions.expect(
                 ~~~~~~~~~~~~~~~~^
        roles.DMLTableRole, table, apply_propagate_attrs=self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 392, in expect
    impl._raise_for_expected(original_element, argname)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        element,
        ^^^^^^^^
    ...<5 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x0000023DA6B39590>.
2025-11-14 13:16:57,532 [INFO] app_logger: Выключение
2025-11-14 13:16:58,433 [INFO] app_logger: Запуск сервера
2025-11-14 13:16:58,433 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:16:58,517 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:16:58,517 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:16:58,532 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:16:58,532 [INFO] app_logger: База готова к работе
2025-11-14 13:17:02,407 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:17:04,612 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:17:06,737 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:17:06,741 [ERROR] app_logger: Ошибка при создании сессии: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x000001997A2ABED0>.
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 41, in delete_answer_by_id
    await session.execute(delete(result).where(cls.model.id == id))
                          ~~~~~~^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\_dml_constructors.py", line 132, in delete
    return Delete(table)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1747, in __init__
    self.table = coercions.expect(
                 ~~~~~~~~~~~~~~~~^
        roles.DMLTableRole, table, apply_propagate_attrs=self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 392, in expect
    impl._raise_for_expected(original_element, argname)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        element,
        ^^^^^^^^
    ...<5 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: subject table for an INSERT, UPDATE or DELETE expected, got <app.database.models.AnswerModels object at 0x000001997A2ABED0>.
2025-11-14 13:17:43,514 [INFO] app_logger: Выключение
2025-11-14 13:17:44,450 [INFO] app_logger: Запуск сервера
2025-11-14 13:17:44,451 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:17:44,538 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:17:44,539 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:17:44,553 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:17:44,553 [INFO] app_logger: База готова к работе
2025-11-14 13:18:24,262 [INFO] app_logger: Выключение
2025-11-14 13:18:25,142 [INFO] app_logger: Запуск сервера
2025-11-14 13:18:25,142 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:18:25,222 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:18:25,222 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:18:25,235 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:18:25,235 [INFO] app_logger: База готова к работе
2025-11-14 13:18:33,623 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:18:35,273 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:18:36,954 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:18:40,983 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:18:40,985 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 39, in delete_answer_by_id
    await cls.get_answer_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 13:20:02,605 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:20:10,646 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:20:14,404 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:20:17,726 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:20:34,838 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:20:34,840 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 32, in delete_answer
    return await AnswerDAO.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 39, in delete_answer_by_id
    await cls.get_answer_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 34, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 13:20:47,764 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:21:02,559 [INFO] app_logger: Выключение
2025-11-14 13:21:05,032 [INFO] app_logger: Запуск сервера
2025-11-14 13:21:05,033 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:21:05,116 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:21:05,116 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:21:05,129 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:21:05,129 [INFO] app_logger: База готова к работе
2025-11-14 13:21:15,270 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:21:27,278 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:21:30,862 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:21:33,762 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:21:53,574 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:31:13,654 [INFO] app_logger: Выключение
2025-11-14 13:31:14,626 [INFO] app_logger: Запуск сервера
2025-11-14 13:31:14,627 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:31:14,816 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:31:14,816 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:31:14,829 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:31:14,829 [INFO] app_logger: База готова к работе
2025-11-14 13:31:34,533 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:31:57,583 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:31:57,585 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
2025-11-14 13:33:05,122 [INFO] app_logger: Выключение
2025-11-14 13:33:06,016 [INFO] app_logger: Запуск сервера
2025-11-14 13:33:06,016 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:33:06,101 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:33:06,101 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:33:06,115 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:33:06,115 [INFO] app_logger: База готова к работе
2025-11-14 13:33:07,992 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:33:07,993 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
2025-11-14 13:33:12,829 [INFO] app_logger: Выключение
2025-11-14 13:33:16,166 [INFO] app_logger: Запуск сервера
2025-11-14 13:33:16,166 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:33:16,248 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:33:16,248 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:33:16,262 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:33:16,262 [INFO] app_logger: База готова к работе
2025-11-14 13:33:22,965 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:33:22,966 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
2025-11-14 13:35:44,252 [INFO] app_logger: Выключение
2025-11-14 13:35:45,174 [INFO] app_logger: Запуск сервера
2025-11-14 13:35:45,174 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:35:45,254 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:35:45,254 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:35:45,269 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:35:45,270 [INFO] app_logger: База готова к работе
2025-11-14 13:39:12,431 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:39:12,432 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
2025-11-14 13:39:30,848 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:39:30,848 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
2025-11-14 13:42:43,413 [INFO] app_logger: Выключение
2025-11-14 13:42:46,138 [INFO] app_logger: Запуск сервера
2025-11-14 13:42:46,138 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:42:46,223 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:42:46,223 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:42:46,239 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:42:46,239 [INFO] app_logger: База готова к работе
2025-11-14 13:42:54,760 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:42:54,761 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{id}'}]
2025-11-14 13:43:29,230 [INFO] app_logger: Выключение
2025-11-14 13:43:30,160 [INFO] app_logger: Запуск сервера
2025-11-14 13:43:30,161 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:43:30,242 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:43:30,242 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:43:30,255 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:43:30,255 [INFO] app_logger: База готова к работе
2025-11-14 13:43:39,378 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:43:39,379 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'int_parsing', 'loc': ('path', 'idd'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{idd}'}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'idd'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '{idd}'}]
2025-11-14 13:43:50,825 [INFO] app_logger: Выключение
2025-11-14 13:43:51,715 [INFO] app_logger: Запуск сервера
2025-11-14 13:43:51,716 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:43:51,802 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:43:51,802 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:43:51,821 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:43:51,821 [INFO] app_logger: База готова к работе
2025-11-14 13:45:10,964 [INFO] app_logger: Выключение
2025-11-14 13:45:11,831 [INFO] app_logger: Запуск сервера
2025-11-14 13:45:11,831 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:45:11,916 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:45:11,916 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:45:11,929 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:45:11,929 [INFO] app_logger: База готова к работе
2025-11-14 13:45:38,648 [INFO] app_logger: Выключение
2025-11-14 13:45:39,525 [INFO] app_logger: Запуск сервера
2025-11-14 13:45:39,525 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:45:39,609 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:45:39,609 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:45:39,623 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:45:39,623 [INFO] app_logger: База готова к работе
2025-11-14 13:46:30,470 [INFO] app_logger: Выключение
2025-11-14 13:46:31,333 [INFO] app_logger: Запуск сервера
2025-11-14 13:46:31,333 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:46:31,425 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:46:31,426 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:46:31,440 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:46:31,440 [INFO] app_logger: База готова к работе
2025-11-14 13:46:43,476 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:46:43,484 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 30, in get_question
    return await QuestionDAO.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 35, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 13:48:03,172 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:48:13,490 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:48:59,117 [INFO] app_logger: Выключение
2025-11-14 13:49:00,021 [INFO] app_logger: Запуск сервера
2025-11-14 13:49:00,021 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:49:00,106 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:49:00,107 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:49:00,119 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:49:00,119 [INFO] app_logger: База готова к работе
2025-11-14 13:49:02,404 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:49:05,562 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:49:41,886 [INFO] app_logger: Выключение
2025-11-14 13:49:42,784 [INFO] app_logger: Запуск сервера
2025-11-14 13:49:42,784 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:49:42,865 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:49:42,865 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:49:42,879 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:49:42,879 [INFO] app_logger: База готова к работе
2025-11-14 13:50:10,459 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:10,465 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerDAO.create_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 18, in create_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 13:50:14,612 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:14,614 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerDAO.create_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 18, in create_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 13:50:17,902 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:17,904 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerDAO.create_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\answer\crud.py", line 18, in create_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 13:50:37,695 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:39,718 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:44,218 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:49,792 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:50:52,689 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:51:34,149 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:52:15,430 [INFO] app_logger: Выключение
2025-11-14 13:52:16,324 [INFO] app_logger: Запуск сервера
2025-11-14 13:52:16,324 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:52:16,514 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:52:16,514 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:52:16,527 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:52:16,527 [INFO] app_logger: База готова к работе
2025-11-14 13:52:26,954 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:52:33,410 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:52:36,297 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:52:42,110 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:54:21,959 [INFO] app_logger: Выключение
2025-11-14 13:54:22,885 [INFO] app_logger: Запуск сервера
2025-11-14 13:54:22,885 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:54:22,968 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:54:22,968 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:54:22,981 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:54:22,981 [INFO] app_logger: База готова к работе
2025-11-14 13:55:07,968 [INFO] app_logger: Выключение
2025-11-14 13:55:08,856 [INFO] app_logger: Запуск сервера
2025-11-14 13:55:08,856 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:55:09,052 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:55:09,052 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:55:09,067 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:55:09,068 [INFO] app_logger: База готова к работе
2025-11-14 13:55:52,032 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:55:55,464 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:55:58,563 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:56:03,839 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:57:42,423 [INFO] app_logger: Выключение
2025-11-14 13:57:43,359 [INFO] app_logger: Запуск сервера
2025-11-14 13:57:43,360 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:57:43,448 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:57:43,449 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:57:43,466 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:57:43,466 [INFO] app_logger: База готова к работе
2025-11-14 13:59:08,167 [INFO] app_logger: Выключение
2025-11-14 13:59:09,130 [INFO] app_logger: Запуск сервера
2025-11-14 13:59:09,130 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:59:09,222 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:59:09,222 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:59:09,238 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:59:09,239 [INFO] app_logger: База готова к работе
2025-11-14 13:59:32,960 [INFO] app_logger: Выключение
2025-11-14 13:59:35,552 [INFO] app_logger: Запуск сервера
2025-11-14 13:59:35,552 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 13:59:35,636 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 13:59:35,637 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 13:59:35,651 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 13:59:35,651 [INFO] app_logger: База готова к работе
2025-11-14 13:59:40,555 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:59:44,161 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:59:46,592 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 13:59:50,856 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:01:06,323 [INFO] app_logger: Выключение
2025-11-14 14:02:13,538 [INFO] app_logger: Запуск сервера
2025-11-14 14:02:13,538 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 14:02:13,739 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 14:02:13,739 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 14:02:13,754 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 14:02:13,755 [INFO] app_logger: База готова к работе
2025-11-14 14:02:13,763 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:02:13,767 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:02:31,045 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:10:33,996 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:10:42,921 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:10:47,223 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:10:50,365 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:11:00,567 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:11:03,190 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:11:16,838 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:12:38,579 [INFO] app_logger: Запуск сервера
2025-11-14 14:12:38,579 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 14:12:38,664 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 14:12:38,664 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 14:12:38,679 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 14:12:38,679 [INFO] app_logger: База готова к работе
2025-11-14 14:12:50,666 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:12:59,086 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:13:02,154 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:13:05,204 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:13:35,127 [INFO] app_logger: Выключение
2025-11-14 14:13:35,968 [INFO] app_logger: Запуск сервера
2025-11-14 14:13:35,968 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 14:13:36,055 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 14:13:36,055 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 14:13:36,070 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 14:13:36,070 [INFO] app_logger: База готова к работе
2025-11-14 14:13:54,913 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:14:06,072 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:14:09,772 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:14:12,267 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:14:22,536 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:14:32,701 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:14:48,605 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:16:36,894 [INFO] app_logger: Выключение
2025-11-14 14:16:37,812 [INFO] app_logger: Запуск сервера
2025-11-14 14:16:37,812 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 14:16:37,892 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 14:16:37,892 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 14:16:37,907 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 14:16:37,907 [INFO] app_logger: База готова к работе
2025-11-14 14:16:43,100 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:16:48,243 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:16:49,998 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:16:51,137 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:16:58,587 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:17:07,510 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:17:11,443 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 14:17:11,445 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 30, in get_question
    return await QuestionDAO.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 36, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 15:55:18,074 [INFO] app_logger: Выключение
2025-11-14 15:55:19,778 [INFO] app_logger: Запуск сервера
2025-11-14 15:55:19,778 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 15:55:19,861 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 15:55:19,861 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 15:55:19,876 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 15:55:19,876 [INFO] app_logger: База готова к работе
2025-11-14 15:56:01,665 [INFO] app_logger: Выключение
2025-11-14 15:56:02,556 [INFO] app_logger: Запуск сервера
2025-11-14 15:56:02,556 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 15:56:02,646 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 15:56:02,647 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 15:56:02,662 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 15:56:02,662 [INFO] app_logger: База готова к работе
2025-11-14 16:00:31,929 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:40,595 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:40,751 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:40,887 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:41,125 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:41,307 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:41,507 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:41,682 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:41,906 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:00:43,749 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:01:41,664 [INFO] app_logger: Выключение
2025-11-14 16:01:42,558 [INFO] app_logger: Запуск сервера
2025-11-14 16:01:42,558 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:01:42,748 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:01:42,749 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:01:42,761 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:01:42,762 [INFO] app_logger: База готова к работе
2025-11-14 16:01:48,002 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:01:52,660 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:01:52,815 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:01:52,967 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:01:53,192 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:02:04,227 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:02:20,959 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:02:20,968 [ERROR] app_logger: Ошибка при создании сессии: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".
[SQL: DELETE FROM questions WHERE questions.id = $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 37, in delete_question
    return await QuestionDAO.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 42, in delete_question_by_id
    await session.execute(delete(cls.model).where(cls.model.id == id))
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session, statement, params, execution_options, bind_arguments, conn
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".
[SQL: DELETE FROM questions WHERE questions.id = $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-14 16:02:39,025 [INFO] app_logger: Выключение
2025-11-14 16:02:39,908 [INFO] app_logger: Запуск сервера
2025-11-14 16:02:39,908 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:02:39,986 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:02:39,986 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:02:39,999 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:02:39,999 [INFO] app_logger: База готова к работе
2025-11-14 16:02:54,872 [INFO] app_logger: Выключение
2025-11-14 16:02:55,722 [INFO] app_logger: Запуск сервера
2025-11-14 16:02:55,722 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:02:55,800 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:02:55,800 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:02:55,813 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:02:55,813 [INFO] app_logger: База готова к работе
2025-11-14 16:03:00,412 [INFO] app_logger: Запуск сервера
2025-11-14 16:03:00,412 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:03:00,599 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:03:00,600 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:03:00,612 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:03:00,612 [INFO] app_logger: База готова к работе
2025-11-14 16:03:07,737 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:13,835 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:13,989 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:14,140 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:14,365 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:18,928 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:29,369 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:29,376 [ERROR] app_logger: Ошибка при создании сессии: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".
[SQL: DELETE FROM questions WHERE questions.id = $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 37, in delete_question
    return await QuestionDAO.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 42, in delete_question_by_id
    await session.execute(delete(cls.model).where(cls.model.id == id))
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session, statement, params, execution_options, bind_arguments, conn
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".
[SQL: DELETE FROM questions WHERE questions.id = $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-14 16:03:37,288 [INFO] app_logger: Выключение
2025-11-14 16:03:38,167 [INFO] app_logger: Запуск сервера
2025-11-14 16:03:38,167 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:03:38,262 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:03:38,262 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:03:38,275 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:03:38,275 [INFO] app_logger: База готова к работе
2025-11-14 16:03:42,453 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:48,322 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:48,545 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:49,045 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:49,261 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:03:52,649 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:04:42,869 [INFO] app_logger: Выключение
2025-11-14 16:04:43,730 [INFO] app_logger: Запуск сервера
2025-11-14 16:04:43,730 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:04:43,810 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:04:43,811 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:04:43,831 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:04:43,832 [INFO] app_logger: База готова к работе
2025-11-14 16:04:49,861 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:04:55,429 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:04:55,553 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:04:55,699 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:04:55,902 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:04:58,939 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:26,029 [INFO] app_logger: Выключение
2025-11-14 16:05:26,921 [INFO] app_logger: Запуск сервера
2025-11-14 16:05:26,921 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:05:27,003 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:05:27,003 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:05:27,017 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:05:27,018 [INFO] app_logger: База готова к работе
2025-11-14 16:05:32,082 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:34,127 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:38,147 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:38,306 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:38,520 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:38,887 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:41,604 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:05:41,610 [ERROR] app_logger: Ошибка при создании сессии: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".
[SQL: DELETE FROM questions WHERE questions.id = $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 37, in delete_question
    return await QuestionDAO.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 42, in delete_question_by_id
    await session.execute(delete(cls.model).where(cls.model.id == id))
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session, statement, params, execution_options, bind_arguments, conn
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: UPDATE или DELETE в таблице "questions" нарушает ограничение внешнего ключа "answer_question_id_fkey" таблицы "answer"
DETAIL:  На ключ (id)=(1) всё ещё есть ссылки в таблице "answer".
[SQL: DELETE FROM questions WHERE questions.id = $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-14 16:06:31,332 [INFO] app_logger: Выключение
2025-11-14 16:06:32,238 [INFO] app_logger: Запуск сервера
2025-11-14 16:06:32,238 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:06:32,422 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:06:32,422 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:06:32,436 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:06:32,436 [INFO] app_logger: База готова к работе
2025-11-14 16:10:34,083 [INFO] app_logger: Выключение
2025-11-14 16:10:34,970 [INFO] app_logger: Запуск сервера
2025-11-14 16:10:34,970 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:10:35,053 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:10:35,053 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:10:35,066 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:10:35,066 [INFO] app_logger: База готова к работе
2025-11-14 16:10:37,835 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:10:37,842 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 37, in delete_question
    return await QuestionDAO.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 41, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 36, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 16:10:42,924 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:10:51,047 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:10:52,666 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:10:55,607 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:11:03,692 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:11:10,209 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:11:10,211 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 30, in get_question
    return await QuestionDAO.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 36, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 16:12:45,950 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:12:45,952 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 30, in get_question
    return await QuestionDAO.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 36, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 16:12:49,906 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:12:49,908 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 30, in get_question
    return await QuestionDAO.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\questions\crud.py", line 36, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 16:12:52,368 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:12:52,929 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:12:55,638 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:12:58,126 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:13:09,239 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:15:20,038 [INFO] app_logger: Выключение
2025-11-14 16:15:20,990 [INFO] app_logger: Запуск сервера
2025-11-14 16:15:20,990 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:15:21,077 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:15:21,078 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:15:21,093 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:15:21,093 [INFO] app_logger: База готова к работе
2025-11-14 16:16:20,977 [INFO] app_logger: Выключение
2025-11-14 16:16:21,872 [INFO] app_logger: Запуск сервера
2025-11-14 16:16:21,872 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:16:21,952 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:16:21,953 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:16:21,967 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:16:21,967 [INFO] app_logger: База готова к работе
2025-11-14 16:16:41,431 [INFO] app_logger: Выключение
2025-11-14 16:16:42,330 [INFO] app_logger: Запуск сервера
2025-11-14 16:16:42,330 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:16:42,411 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:16:42,411 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:16:42,424 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:16:42,424 [INFO] app_logger: База готова к работе
2025-11-14 16:18:10,695 [INFO] app_logger: Выключение
2025-11-14 16:18:11,642 [INFO] app_logger: Запуск сервера
2025-11-14 16:18:11,642 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:18:11,828 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:18:11,828 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:18:11,841 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:18:11,842 [INFO] app_logger: База готова к работе
2025-11-14 16:18:30,768 [INFO] app_logger: Выключение
2025-11-14 16:18:31,780 [INFO] app_logger: Запуск сервера
2025-11-14 16:18:31,780 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:18:31,866 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:18:31,866 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:18:31,879 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:18:31,879 [INFO] app_logger: База готова к работе
2025-11-14 16:21:18,573 [INFO] app_logger: Выключение
2025-11-14 16:22:49,317 [INFO] app_logger: Запуск сервера
2025-11-14 16:22:49,317 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:22:49,399 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:22:49,399 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:22:49,413 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:22:49,413 [INFO] app_logger: База готова к работе
2025-11-14 16:44:38,901 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:44:56,977 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:44:57,651 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:45:39,717 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:45:42,543 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:47:08,991 [INFO] app_logger: Запуск сервера
2025-11-14 16:47:08,991 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:47:09,073 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:47:09,073 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:47:09,087 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:47:09,088 [INFO] app_logger: База готова к работе
2025-11-14 16:47:18,482 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:47:25,260 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:47:25,719 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:47:26,363 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:47:29,783 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 16:48:59,316 [INFO] app_logger: Выключение
2025-11-14 16:49:00,218 [INFO] app_logger: Запуск сервера
2025-11-14 16:49:00,218 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:49:00,301 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:49:00,302 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:49:00,316 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:49:00,316 [INFO] app_logger: База готова к работе
2025-11-14 16:53:06,994 [INFO] app_logger: Выключение
2025-11-14 16:53:07,980 [INFO] app_logger: Запуск сервера
2025-11-14 16:53:07,980 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:53:08,061 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:53:08,061 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:53:08,075 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:53:08,075 [INFO] app_logger: База готова к работе
2025-11-14 16:58:27,647 [INFO] app_logger: Выключение
2025-11-14 16:58:28,587 [INFO] app_logger: Запуск сервера
2025-11-14 16:58:28,587 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 16:58:28,669 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 16:58:28,669 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 16:58:28,682 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 16:58:28,683 [INFO] app_logger: База готова к работе
2025-11-14 17:01:39,516 [INFO] app_logger: Выключение
2025-11-14 17:01:40,414 [INFO] app_logger: Запуск сервера
2025-11-14 17:01:40,414 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:01:40,499 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:01:40,499 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:01:40,516 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:01:40,516 [INFO] app_logger: База готова к работе
2025-11-14 17:06:05,269 [INFO] app_logger: Выключение
2025-11-14 17:06:06,176 [INFO] app_logger: Запуск сервера
2025-11-14 17:06:06,176 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:06:06,365 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:06:06,365 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:06:06,378 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:06:06,379 [INFO] app_logger: База готова к работе
2025-11-14 17:06:29,535 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:06:36,426 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:10:00,479 [INFO] app_logger: Выключение
2025-11-14 17:10:01,386 [INFO] app_logger: Запуск сервера
2025-11-14 17:10:01,386 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:10:01,466 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:10:01,466 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:10:01,481 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:10:01,482 [INFO] app_logger: База готова к работе
2025-11-14 17:17:25,937 [INFO] app_logger: Выключение
2025-11-14 17:17:26,836 [INFO] app_logger: Запуск сервера
2025-11-14 17:17:26,837 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:17:27,024 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:17:27,025 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:17:27,037 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:17:27,038 [INFO] app_logger: База готова к работе
2025-11-14 17:24:00,324 [INFO] app_logger: Выключение
2025-11-14 17:24:01,306 [INFO] app_logger: Запуск сервера
2025-11-14 17:24:01,306 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:24:01,390 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:24:01,390 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:24:01,405 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:24:01,405 [INFO] app_logger: База готова к работе
2025-11-14 17:24:31,323 [INFO] app_logger: Выключение
2025-11-14 17:24:32,246 [INFO] app_logger: Запуск сервера
2025-11-14 17:24:32,246 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:24:32,438 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:24:32,438 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:24:32,451 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:24:32,451 [INFO] app_logger: База готова к работе
2025-11-14 17:27:00,853 [INFO] app_logger: Выключение
2025-11-14 17:27:01,838 [INFO] app_logger: Запуск сервера
2025-11-14 17:27:01,838 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:27:01,918 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:27:01,918 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:27:01,932 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:27:01,932 [INFO] app_logger: База готова к работе
2025-11-14 17:30:17,695 [INFO] app_logger: Выключение
2025-11-14 17:30:29,319 [INFO] app_logger: Запуск сервера
2025-11-14 17:30:29,320 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:30:29,418 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:30:29,418 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:30:29,435 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:30:29,436 [INFO] app_logger: База готова к работе
2025-11-14 17:31:59,649 [INFO] app_logger: Запуск сервера
2025-11-14 17:31:59,649 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:31:59,734 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:31:59,734 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:31:59,748 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:31:59,748 [INFO] app_logger: База готова к работе
2025-11-14 17:32:13,167 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:32:17,422 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:32:20,662 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:32:20,666 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.database.models.QuestionModels object at 0x00000207060AB390>, <app.database.models.QuestionModels object at 0x000002070608AEA0>]}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.database.models.QuestionModels object at 0x00000207060AB390>, <app.database.models.QuestionModels object at 0x000002070608AEA0>]}

2025-11-14 17:33:26,890 [INFO] app_logger: Выключение
2025-11-14 17:33:27,780 [INFO] app_logger: Запуск сервера
2025-11-14 17:33:27,780 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:33:27,970 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:33:27,970 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:33:27,983 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:33:27,984 [INFO] app_logger: База готова к работе
2025-11-14 17:33:33,217 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:33:33,890 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:33:36,205 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:33:36,211 [ERROR] app_logger: Ошибка при создании сессии: 2 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x00000260D6BD3750>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 1, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x00000260D6BAAB10>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x00000260D6BD3750>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 1, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x00000260D6BAAB10>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-14 17:34:57,963 [INFO] app_logger: Выключение
2025-11-14 17:34:58,961 [INFO] app_logger: Запуск сервера
2025-11-14 17:34:58,962 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:34:59,050 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:34:59,050 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:34:59,065 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:34:59,066 [INFO] app_logger: База готова к работе
2025-11-14 17:37:48,710 [INFO] app_logger: Выключение
2025-11-14 17:37:49,615 [INFO] app_logger: Запуск сервера
2025-11-14 17:37:49,615 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:37:49,714 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:37:49,715 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:37:49,729 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:37:49,729 [INFO] app_logger: База готова к работе
2025-11-14 17:38:00,496 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:38:01,151 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:38:06,572 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 17:45:04,307 [INFO] app_logger: Выключение
2025-11-14 17:45:05,244 [INFO] app_logger: Запуск сервера
2025-11-14 17:45:05,244 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:45:05,327 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:45:05,327 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:45:05,342 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:45:05,342 [INFO] app_logger: База готова к работе
2025-11-14 17:46:53,170 [INFO] app_logger: Выключение
2025-11-14 17:46:54,083 [INFO] app_logger: Запуск сервера
2025-11-14 17:46:54,083 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:46:54,165 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:46:54,165 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:46:54,180 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:46:54,180 [INFO] app_logger: База готова к работе
2025-11-14 17:49:35,118 [INFO] app_logger: Выключение
2025-11-14 17:49:36,084 [INFO] app_logger: Запуск сервера
2025-11-14 17:49:36,084 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:49:36,171 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:49:36,171 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:49:36,186 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:49:36,186 [INFO] app_logger: База готова к работе
2025-11-14 17:52:00,755 [INFO] app_logger: Выключение
2025-11-14 17:52:01,716 [INFO] app_logger: Запуск сервера
2025-11-14 17:52:01,717 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:52:01,897 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:52:01,898 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:52:01,910 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:52:01,911 [INFO] app_logger: База готова к работе
2025-11-14 17:56:10,930 [INFO] app_logger: Выключение
2025-11-14 17:56:11,883 [INFO] app_logger: Запуск сервера
2025-11-14 17:56:11,884 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:56:11,967 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:56:11,967 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:56:11,979 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:56:11,980 [INFO] app_logger: База готова к работе
2025-11-14 17:58:47,728 [INFO] app_logger: Выключение
2025-11-14 17:58:48,665 [INFO] app_logger: Запуск сервера
2025-11-14 17:58:48,665 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:58:48,846 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:58:48,846 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:58:48,859 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:58:48,859 [INFO] app_logger: База готова к работе
2025-11-14 17:58:58,523 [INFO] app_logger: Выключение
2025-11-14 17:58:59,418 [INFO] app_logger: Запуск сервера
2025-11-14 17:58:59,419 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:58:59,496 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:58:59,496 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:58:59,507 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:58:59,507 [INFO] app_logger: База готова к работе
2025-11-14 17:59:42,766 [INFO] app_logger: Выключение
2025-11-14 17:59:43,776 [INFO] app_logger: Запуск сервера
2025-11-14 17:59:43,776 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 17:59:43,966 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 17:59:43,966 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 17:59:43,979 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 17:59:43,980 [INFO] app_logger: База готова к работе
2025-11-14 18:00:31,416 [INFO] app_logger: Выключение
2025-11-14 18:00:32,305 [INFO] app_logger: Запуск сервера
2025-11-14 18:00:32,305 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:00:32,382 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:00:32,382 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:00:32,395 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:00:32,395 [INFO] app_logger: База готова к работе
2025-11-14 18:02:25,053 [INFO] app_logger: Выключение
2025-11-14 18:02:25,999 [INFO] app_logger: Запуск сервера
2025-11-14 18:02:25,999 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:02:26,081 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:02:26,081 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:02:26,094 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:02:26,094 [INFO] app_logger: База готова к работе
2025-11-14 18:05:11,164 [INFO] app_logger: Выключение
2025-11-14 18:20:59,762 [INFO] app_logger: Запуск сервера
2025-11-14 18:20:59,762 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:20:59,844 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:20:59,844 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:20:59,856 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:20:59,856 [INFO] app_logger: База готова к работе
2025-11-14 18:47:04,282 [INFO] app_logger: Запуск сервера
2025-11-14 18:47:04,282 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:47:04,475 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:47:04,475 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:47:04,487 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:47:04,487 [INFO] app_logger: База готова к работе
2025-11-14 18:47:18,883 [INFO] app_logger: Выключение
2025-11-14 18:47:21,539 [INFO] app_logger: Запуск сервера
2025-11-14 18:47:21,540 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:47:21,621 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:47:21,622 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:47:21,634 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:47:21,634 [INFO] app_logger: База готова к работе
2025-11-14 18:47:37,383 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:47:48,355 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:47:48,359 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 18:47:51,059 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:47:52,772 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:48:40,997 [INFO] app_logger: Выключение
2025-11-14 18:48:41,921 [INFO] app_logger: Запуск сервера
2025-11-14 18:48:41,921 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:48:42,011 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:48:42,011 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:48:42,024 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:48:42,025 [INFO] app_logger: База готова к работе
2025-11-14 18:52:19,627 [INFO] app_logger: Выключение
2025-11-14 18:52:20,513 [INFO] app_logger: Запуск сервера
2025-11-14 18:52:20,513 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:52:20,595 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:52:20,595 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:52:20,608 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:52:20,608 [INFO] app_logger: База готова к работе
2025-11-14 18:52:40,671 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:42,707 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:42,711 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 18:52:42,928 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:42,930 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 18:52:45,547 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:54,180 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:54,183 [INFO] app_logger: Создан вопрос с ID 3
2025-11-14 18:52:54,400 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:54,402 [INFO] app_logger: Создан вопрос с ID 4
2025-11-14 18:52:55,279 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:55,281 [INFO] app_logger: Создан вопрос с ID 5
2025-11-14 18:52:55,716 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:52:55,718 [INFO] app_logger: Создан вопрос с ID 6
2025-11-14 18:53:00,580 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:11,881 [INFO] app_logger: Выключение
2025-11-14 18:53:12,763 [INFO] app_logger: Запуск сервера
2025-11-14 18:53:12,763 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:53:12,949 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:53:12,950 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:53:12,961 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:53:12,961 [INFO] app_logger: База готова к работе
2025-11-14 18:53:15,923 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:15,929 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 18:53:16,599 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:16,601 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 18:53:19,731 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:45,535 [INFO] app_logger: Выключение
2025-11-14 18:53:46,432 [INFO] app_logger: Запуск сервера
2025-11-14 18:53:46,432 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:53:46,518 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:53:46,518 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:53:46,530 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:53:46,531 [INFO] app_logger: База готова к работе
2025-11-14 18:53:48,203 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:48,210 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 18:53:48,853 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:48,855 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 18:53:51,560 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:52,358 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:54,571 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:54,573 [INFO] app_logger: Создан вопрос с ID 3
2025-11-14 18:53:54,719 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:54,721 [INFO] app_logger: Создан вопрос с ID 4
2025-11-14 18:53:54,946 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:53:54,949 [INFO] app_logger: Создан вопрос с ID 5
2025-11-14 18:53:56,672 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:55:17,321 [INFO] app_logger: Выключение
2025-11-14 18:58:01,560 [INFO] app_logger: Запуск сервера
2025-11-14 18:58:01,560 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 18:58:01,646 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 18:58:01,646 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 18:58:01,659 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 18:58:01,659 [INFO] app_logger: База готова к работе
2025-11-14 18:58:57,253 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:58:57,261 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 18:59:12,144 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 18:59:12,147 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 4
2025-11-14 18:59:12,147 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 48, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 19:01:15,541 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:01:15,544 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 19:01:17,641 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:01:17,642 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 4
2025-11-14 19:01:17,643 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 48, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 19:01:21,105 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:01:21,111 [INFO] app_logger: Создан ответ с ID 1 для вопроса 2
2025-11-14 19:04:12,634 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:04:12,639 [INFO] app_logger: Создан ответ с ID 2 для вопроса 2
2025-11-14 19:27:40,675 [INFO] app_logger: Запуск сервера
2025-11-14 19:27:40,675 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:27:40,758 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:27:40,758 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:27:40,770 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:27:40,770 [INFO] app_logger: База готова к работе
2025-11-14 19:27:48,186 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:27:48,192 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:28:05,880 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:28:05,883 [INFO] app_logger: Список вопросов получен
2025-11-14 19:28:48,674 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:28:48,677 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 19:29:01,781 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:29:01,783 [INFO] app_logger: Список вопросов получен
2025-11-14 19:29:39,876 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:29:39,882 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-14 19:29:56,636 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:29:56,660 [INFO] app_logger: Создан ответ с ID 2 для вопроса 1
2025-11-14 19:30:00,168 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:30:00,171 [INFO] app_logger: Создан ответ с ID 3 для вопроса 1
2025-11-14 19:30:34,168 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:30:34,169 [INFO] app_logger: Список вопросов получен
2025-11-14 19:30:41,276 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:30:41,282 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 19:31:29,041 [INFO] app_logger: Выключение
2025-11-14 19:31:31,995 [INFO] app_logger: Запуск сервера
2025-11-14 19:31:31,996 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:31:32,076 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:31:32,077 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:31:32,090 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:31:32,090 [INFO] app_logger: База готова к работе
2025-11-14 19:31:38,963 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:31:38,969 [INFO] app_logger: Список вопросов получен
2025-11-14 19:31:44,365 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:31:44,369 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:31:51,224 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:31:51,230 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-14 19:31:54,102 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:31:54,107 [INFO] app_logger: Создан ответ с ID 2 для вопроса 1
2025-11-14 19:31:58,321 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:31:58,327 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 19:32:16,850 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:32:16,854 [INFO] app_logger: Создан ответ с ID 3 для вопроса 1
2025-11-14 19:33:39,261 [INFO] app_logger: Выключение
2025-11-14 19:33:40,171 [INFO] app_logger: Запуск сервера
2025-11-14 19:33:40,172 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:33:40,356 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:33:40,356 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:33:40,367 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:33:40,368 [INFO] app_logger: База готова к работе
2025-11-14 19:33:45,642 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:33:45,648 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 1
2025-11-14 19:33:45,649 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 18, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 48, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 19:33:50,371 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:33:50,375 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:33:53,129 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:33:53,136 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1, UUID пользователя: 123e4567-e89b-12d3-a456-426655441000
2025-11-14 19:36:35,593 [INFO] app_logger: Выключение
2025-11-14 19:36:36,489 [INFO] app_logger: Запуск сервера
2025-11-14 19:36:36,489 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:36:36,568 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:36:36,569 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:36:36,602 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:36:36,602 [INFO] app_logger: База готова к работе
2025-11-14 19:36:42,796 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:36:42,803 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:36:45,377 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:36:45,387 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1, UUID пользователя: 123e4567-e89b-12d3-a456-426655441000
2025-11-14 19:38:18,104 [INFO] app_logger: Выключение
2025-11-14 19:38:18,972 [INFO] app_logger: Запуск сервера
2025-11-14 19:38:18,972 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:38:19,055 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:38:19,056 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:38:19,066 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:38:19,067 [INFO] app_logger: База готова к работе
2025-11-14 19:38:22,932 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:38:22,940 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:38:25,433 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:38:25,439 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1, UUID пользователя: 123e4567-e89b-12d3-a456-426655441000
2025-11-14 19:42:10,620 [INFO] app_logger: Выключение
2025-11-14 19:44:53,701 [INFO] app_logger: Запуск сервера
2025-11-14 19:44:53,702 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:44:53,789 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:44:53,790 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:44:53,806 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:44:53,806 [INFO] app_logger: База готова к работе
2025-11-14 19:51:36,903 [INFO] app_logger: Запуск сервера
2025-11-14 19:51:36,903 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:51:36,984 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:51:36,984 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:51:36,995 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:51:36,996 [INFO] app_logger: База готова к работе
2025-11-14 19:52:02,758 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:52:02,766 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:52:13,718 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:52:13,728 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 19:52:13,731 [INFO] app_logger: Удален вопрос с ID 1 вместе с ответами
2025-11-14 19:52:24,948 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:52:24,950 [ERROR] app_logger: Ошибка при получении вопроса 1: 404: Вопрос не найден
2025-11-14 19:52:24,950 [ERROR] app_logger: Ошибка при создании сессии: 500: Ошибка сервера
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 28, in get_question
    return await QuestionRepository.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера
2025-11-14 19:52:54,580 [INFO] app_logger: Выключение
2025-11-14 19:52:55,564 [INFO] app_logger: Запуск сервера
2025-11-14 19:52:55,564 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:52:55,749 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:52:55,749 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:52:55,760 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:52:55,760 [INFO] app_logger: База готова к работе
2025-11-14 19:52:57,651 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:52:57,658 [ERROR] app_logger: Ошибка при получении вопроса 1: 404: Вопрос не найден
2025-11-14 19:52:57,658 [ERROR] app_logger: Ошибка при удалении вопроса 1: 500: Ошибка сервера
2025-11-14 19:52:57,659 [ERROR] app_logger: Ошибка при создании сессии: 500: Не удалось удалить вопрос
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 67, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 35, in delete_question
    return await QuestionRepository.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 74, in delete_question_by_id
    raise HTTPException(status_code=500, detail="Не удалось удалить вопрос")
fastapi.exceptions.HTTPException: 500: Не удалось удалить вопрос
2025-11-14 19:53:02,814 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:53:02,819 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 19:53:05,844 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:53:05,849 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 19:53:05,853 [INFO] app_logger: Удален вопрос с ID 1 вместе с ответами
2025-11-14 19:53:46,699 [INFO] app_logger: Выключение
2025-11-14 19:54:38,102 [INFO] app_logger: Запуск сервера
2025-11-14 19:54:38,103 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 19:54:38,187 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 19:54:38,187 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 19:54:38,201 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 19:54:38,201 [INFO] app_logger: База готова к работе
2025-11-14 19:54:38,203 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:54:38,208 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:54:38,214 [ERROR] app_logger: Ошибка при получении вопроса 1: 404: Вопрос не найден
2025-11-14 19:54:38,214 [ERROR] app_logger: Ошибка при удалении вопроса 1: 500: Ошибка сервера
2025-11-14 19:54:38,215 [ERROR] app_logger: Ошибка при создании сессии: 500: Не удалось удалить вопрос
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 67, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 35, in delete_question
    return await QuestionRepository.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 74, in delete_question_by_id
    raise HTTPException(status_code=500, detail="Не удалось удалить вопрос")
fastapi.exceptions.HTTPException: 500: Не удалось удалить вопрос
2025-11-14 19:54:38,277 [ERROR] app_logger: Ошибка при получении вопроса 1: 404: Вопрос не найден
2025-11-14 19:54:38,277 [ERROR] app_logger: Ошибка при удалении вопроса 1: 500: Ошибка сервера
2025-11-14 19:54:38,278 [ERROR] app_logger: Ошибка при создании сессии: 500: Не удалось удалить вопрос
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 67, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 35, in delete_question
    return await QuestionRepository.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 74, in delete_question_by_id
    raise HTTPException(status_code=500, detail="Не удалось удалить вопрос")
fastapi.exceptions.HTTPException: 500: Не удалось удалить вопрос
2025-11-14 19:54:46,511 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 19:54:46,512 [ERROR] app_logger: Ошибка при получении вопроса 1: 404: Вопрос не найден
2025-11-14 19:54:46,513 [ERROR] app_logger: Ошибка при удалении вопроса 1: 500: Ошибка сервера
2025-11-14 19:54:46,513 [ERROR] app_logger: Ошибка при создании сессии: 500: Не удалось удалить вопрос
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 67, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 35, in delete_question
    return await QuestionRepository.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 74, in delete_question_by_id
    raise HTTPException(status_code=500, detail="Не удалось удалить вопрос")
fastapi.exceptions.HTTPException: 500: Не удалось удалить вопрос
2025-11-14 20:05:18,309 [INFO] app_logger: Запуск сервера
2025-11-14 20:05:18,309 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:05:18,392 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:05:18,392 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:05:18,404 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:05:18,404 [INFO] app_logger: База готова к работе
2025-11-14 20:05:31,862 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:05:31,869 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:05:31,870 [ERROR] app_logger: Ошибка при создании сессии: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'answers'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'answers'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}

2025-11-14 20:06:45,818 [INFO] app_logger: Выключение
2025-11-14 20:06:46,668 [INFO] app_logger: Запуск сервера
2025-11-14 20:06:46,668 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:06:46,747 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:06:46,748 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:06:46,759 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:06:46,759 [INFO] app_logger: База готова к работе
2025-11-14 20:06:50,806 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:06:50,812 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:06:50,812 [ERROR] app_logger: Ошибка при создании сессии: 3 validation errors:
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 3 validation errors:
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'message': 'Вопрос создан'}}

2025-11-14 20:09:16,882 [INFO] app_logger: Выключение
2025-11-14 20:09:17,749 [INFO] app_logger: Запуск сервера
2025-11-14 20:09:17,749 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:09:17,929 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:09:17,929 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:09:17,940 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:09:17,940 [INFO] app_logger: База готова к работе
2025-11-14 20:09:30,359 [INFO] app_logger: Выключение
2025-11-14 20:09:31,230 [INFO] app_logger: Запуск сервера
2025-11-14 20:09:31,230 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:09:31,410 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:09:31,411 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:09:31,422 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:09:31,422 [INFO] app_logger: База готова к работе
2025-11-14 20:11:27,007 [INFO] app_logger: Выключение
2025-11-14 20:11:27,901 [INFO] app_logger: Запуск сервера
2025-11-14 20:11:27,901 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:11:28,087 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:11:28,087 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:11:28,099 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:11:28,099 [INFO] app_logger: База готова к работе
2025-11-14 20:11:30,564 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:11:30,571 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:12:37,746 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:12:37,751 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1, UUID пользователя: 123e4567-e89b-12d3-a456-426655440000
2025-11-14 20:14:03,021 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:14:03,024 [INFO] app_logger: Получен ответ с ID 1
2025-11-14 20:14:41,170 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:14:41,175 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 20:14:41,178 [INFO] app_logger: Удален вопрос с ID 1 вместе с ответами
2025-11-14 20:14:53,961 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:14:53,963 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:14:53,963 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 31, in get_answer
    return await AnswerRepository.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 88, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:15:02,332 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:15:02,333 [INFO] app_logger: Список вопросов получен
2025-11-14 20:15:11,314 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:15:11,316 [ERROR] app_logger: Ошибка при получении вопроса 1: 404: Вопрос не найден
2025-11-14 20:15:11,317 [ERROR] app_logger: Ошибка при создании сессии: 500: Ошибка сервера
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 39, in get_question
    return await QuestionRepository.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера
2025-11-14 20:16:50,072 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:16:50,075 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 20:16:55,004 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:16:55,006 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 1
2025-11-14 20:16:55,006 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 20, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 48, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 20:17:01,867 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:17:01,868 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 1
2025-11-14 20:17:01,869 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 20, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 48, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 20:17:05,801 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:17:05,804 [INFO] app_logger: Создан ответ с ID 2 для вопроса 2, UUID пользователя: 123e4567-e89b-12d3-a456-426655440000
2025-11-14 20:17:15,431 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:17:15,434 [INFO] app_logger: Получен вопрос с ID 2
2025-11-14 20:17:24,773 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:17:24,774 [ERROR] app_logger: Ошибка при получении вопроса 3: 404: Вопрос не найден
2025-11-14 20:17:24,775 [ERROR] app_logger: Ошибка при создании сессии: 500: Ошибка сервера
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 56, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 39, in get_question
    return await QuestionRepository.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 61, in get_question_by_id
    raise HTTPException(status_code=500, detail="Ошибка сервера")
fastapi.exceptions.HTTPException: 500: Ошибка сервера
2025-11-14 20:19:29,262 [INFO] app_logger: Выключение
2025-11-14 20:19:30,183 [INFO] app_logger: Запуск сервера
2025-11-14 20:19:30,183 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:19:30,267 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:19:30,268 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:19:30,279 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:19:30,279 [INFO] app_logger: База готова к работе
2025-11-14 20:19:32,607 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:19:32,614 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 39, in get_question
    return await QuestionRepository.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 57, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 20:19:39,983 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:19:39,987 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:19:44,277 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:19:44,278 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 2
2025-11-14 20:19:44,279 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 20, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 48, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 20:19:50,461 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:19:50,465 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:19:50,466 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 31, in get_answer
    return await AnswerRepository.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 88, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:19:53,001 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:19:53,003 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:19:53,003 [ERROR] app_logger: Ошибка при удалении ответа 1: 404: Ответ не найден
2025-11-14 20:19:53,004 [ERROR] app_logger: Ошибка при создании сессии: 500: Не удалось удалить ответ
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 112, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 88, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 42, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 119, in delete_answer_by_id
    raise HTTPException(status_code=500, detail="Не удалось удалить ответ")
fastapi.exceptions.HTTPException: 500: Не удалось удалить ответ
2025-11-14 20:21:05,707 [INFO] app_logger: Выключение
2025-11-14 20:21:25,621 [INFO] app_logger: Запуск сервера
2025-11-14 20:21:25,621 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:21:25,699 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:21:25,699 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:21:25,710 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:21:25,710 [INFO] app_logger: База готова к работе
2025-11-14 20:21:25,711 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:21:25,716 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:21:25,717 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 42, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 113, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 89, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:21:28,734 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:21:28,735 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:21:28,735 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 42, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 113, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 89, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:25:23,857 [INFO] app_logger: Запуск сервера
2025-11-14 20:25:23,857 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:25:24,044 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:25:24,044 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:25:24,055 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:25:24,055 [INFO] app_logger: База готова к работе
2025-11-14 20:25:26,364 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:25:26,369 [INFO] app_logger: Список вопросов получен
2025-11-14 20:25:38,274 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:25:38,278 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 39, in get_question
    return await QuestionRepository.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 57, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 20:25:41,445 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:25:41,446 [ERROR] app_logger: Ошибка при удалении вопроса 1: 404: Вопрос не найден
2025-11-14 20:25:41,447 [ERROR] app_logger: Ошибка при создании сессии: 500: Не удалось удалить вопрос
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 68, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 57, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 50, in delete_question
    return await QuestionRepository.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 75, in delete_question_by_id
    raise HTTPException(status_code=500, detail="Не удалось удалить вопрос")
fastapi.exceptions.HTTPException: 500: Не удалось удалить вопрос
2025-11-14 20:25:53,981 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:25:53,983 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:25:53,984 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 42, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 113, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 89, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:27:40,395 [INFO] app_logger: Выключение
2025-11-14 20:27:41,309 [INFO] app_logger: Запуск сервера
2025-11-14 20:27:41,309 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:27:41,494 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:27:41,495 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:27:41,508 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:27:41,508 [INFO] app_logger: База готова к работе
2025-11-14 20:27:42,246 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:27:42,252 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:27:42,253 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 42, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 113, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 89, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:27:50,781 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:27:50,785 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 50, in delete_question
    return await QuestionRepository.delete_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 68, in delete_question_by_id
    await cls.get_question_by_id(id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 57, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 20:32:48,182 [INFO] app_logger: Выключение
2025-11-14 20:32:49,258 [INFO] app_logger: Запуск сервера
2025-11-14 20:32:49,258 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:32:49,335 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:32:49,335 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:32:49,346 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:32:49,346 [INFO] app_logger: База готова к работе
2025-11-14 20:33:29,307 [INFO] app_logger: Выключение
2025-11-14 20:34:31,774 [INFO] app_logger: Запуск сервера
2025-11-14 20:34:31,774 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:34:31,967 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:34:31,967 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:34:31,979 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:34:31,979 [INFO] app_logger: База готова к работе
2025-11-14 20:35:20,201 [INFO] app_logger: Запуск сервера
2025-11-14 20:35:20,201 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:35:20,282 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:35:20,283 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:35:20,294 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:35:20,295 [INFO] app_logger: База готова к работе
2025-11-14 20:35:34,020 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:35:34,021 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid length: expected length 32 for simple format, found 1', 'input': 'f', 'ctx': {'error': 'invalid length: expected length 32 for simple format, found 1'}}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid length: expected length 32 for simple format, found 1', 'input': 'f', 'ctx': {'error': 'invalid length: expected length 32 for simple format, found 1'}}]
2025-11-14 20:38:12,744 [INFO] app_logger: Выключение
2025-11-14 20:38:13,677 [INFO] app_logger: Запуск сервера
2025-11-14 20:38:13,678 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:38:13,756 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:38:13,756 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:38:13,769 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:38:13,769 [INFO] app_logger: База готова к работе
2025-11-14 20:38:28,509 [INFO] app_logger: Выключение
2025-11-14 20:38:29,470 [INFO] app_logger: Запуск сервера
2025-11-14 20:38:29,471 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:38:29,551 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:38:29,551 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:38:29,563 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:38:29,563 [INFO] app_logger: База готова к работе
2025-11-14 20:39:36,762 [INFO] app_logger: Выключение
2025-11-14 20:39:37,658 [INFO] app_logger: Запуск сервера
2025-11-14 20:39:37,658 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:39:37,742 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:39:37,742 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:39:37,754 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:39:37,754 [INFO] app_logger: База готова к работе
2025-11-14 20:40:02,180 [INFO] app_logger: Выключение
2025-11-14 20:40:03,066 [INFO] app_logger: Запуск сервера
2025-11-14 20:40:03,066 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:40:03,152 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:40:03,152 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:40:03,163 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:40:03,163 [INFO] app_logger: База готова к работе
2025-11-14 20:42:04,165 [INFO] app_logger: Выключение
2025-11-14 20:42:05,124 [INFO] app_logger: Запуск сервера
2025-11-14 20:42:05,124 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:42:05,206 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:42:05,206 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:42:05,219 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:42:05,219 [INFO] app_logger: База готова к работе
2025-11-14 20:42:32,871 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:42:32,879 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:42:41,318 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:42:41,325 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1, UUID пользователя: None
2025-11-14 20:44:42,942 [INFO] app_logger: Выключение
2025-11-14 20:44:43,844 [INFO] app_logger: Запуск сервера
2025-11-14 20:44:43,844 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:44:43,926 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:44:43,926 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:44:43,938 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:44:43,938 [INFO] app_logger: База готова к работе
2025-11-14 20:44:46,569 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:44:46,576 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:44:49,486 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:44:49,494 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-14 20:45:03,986 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:45:03,991 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 20:45:17,283 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:45:17,283 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `й` at 37', 'input': '3ef100f4-380b-4f01-a5e4-c73930cacac3йвйц', 'ctx': {'error': 'invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `й` at 37'}}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `й` at 37', 'input': '3ef100f4-380b-4f01-a5e4-c73930cacac3йвйц', 'ctx': {'error': 'invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `й` at 37'}}]
2025-11-14 20:45:31,467 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:45:31,470 [INFO] app_logger: Создан ответ с ID 2 для вопроса 1
2025-11-14 20:45:35,904 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:45:35,904 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid group length in group 4: expected 12, found 11', 'input': '3ef100f4-380b-4f01-a5e4-c73930cacac', 'ctx': {'error': 'invalid group length in group 4: expected 12, found 11'}}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid group length in group 4: expected 12, found 11', 'input': '3ef100f4-380b-4f01-a5e4-c73930cacac', 'ctx': {'error': 'invalid group length in group 4: expected 12, found 11'}}]
2025-11-14 20:46:35,503 [INFO] app_logger: Выключение
2025-11-14 20:52:45,267 [INFO] app_logger: Запуск сервера
2025-11-14 20:52:45,268 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:52:45,350 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:52:45,351 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:52:45,363 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:52:45,363 [INFO] app_logger: База готова к работе
2025-11-14 20:52:47,473 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:52:47,479 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 20:52:47,480 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 44, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 115, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 91, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 20:54:53,197 [INFO] app_logger: Выключение
2025-11-14 20:54:54,089 [INFO] app_logger: Запуск сервера
2025-11-14 20:54:54,089 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:54:54,283 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:54:54,283 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:54:54,298 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:54:54,298 [INFO] app_logger: База готова к работе
2025-11-14 20:54:59,806 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:54:59,812 [INFO] app_logger: Список вопросов получен
2025-11-14 20:55:02,001 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:55:02,005 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:55:07,651 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:55:07,658 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 20:55:12,077 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:55:12,077 [ERROR] app_logger: Ошибка при создании сессии: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid group length in group 4: expected 12, found 11', 'input': '3ef100f4-380b-4f01-a5e4-c73930cacac', 'ctx': {'error': 'invalid group length in group 4: expected 12, found 11'}}]
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 432, in app
    raise validation_error
fastapi.exceptions.RequestValidationError: [{'type': 'uuid_parsing', 'loc': ('query', 'user_id'), 'msg': 'Input should be a valid UUID, invalid group length in group 4: expected 12, found 11', 'input': '3ef100f4-380b-4f01-a5e4-c73930cacac', 'ctx': {'error': 'invalid group length in group 4: expected 12, found 11'}}]
2025-11-14 20:55:18,278 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:55:18,282 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-14 20:55:29,184 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:55:29,185 [INFO] app_logger: Список вопросов получен
2025-11-14 20:55:29,187 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000001BB47FD42B0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000001BB47FD42B0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-14 20:57:02,748 [INFO] app_logger: Выключение
2025-11-14 20:57:03,741 [INFO] app_logger: Запуск сервера
2025-11-14 20:57:03,741 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:57:03,831 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:57:03,832 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:57:03,843 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:57:03,844 [INFO] app_logger: База готова к работе
2025-11-14 20:58:11,811 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:58:11,817 [INFO] app_logger: Список вопросов получен
2025-11-14 20:58:20,634 [INFO] app_logger: Выключение
2025-11-14 20:58:24,632 [INFO] app_logger: Запуск сервера
2025-11-14 20:58:24,633 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:58:24,715 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:58:24,715 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:58:24,726 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:58:24,726 [INFO] app_logger: База готова к работе
2025-11-14 20:58:29,922 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:58:29,928 [INFO] app_logger: Список вопросов получен
2025-11-14 20:58:37,400 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:58:37,405 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:58:40,480 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:58:40,481 [INFO] app_logger: Список вопросов получен
2025-11-14 20:58:40,484 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x0000024B58035E50>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x0000024B58035E50>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-14 20:58:59,838 [INFO] app_logger: Выключение
2025-11-14 20:59:00,770 [INFO] app_logger: Запуск сервера
2025-11-14 20:59:00,770 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:59:00,854 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:59:00,855 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:59:00,865 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:59:00,865 [INFO] app_logger: База готова к работе
2025-11-14 20:59:01,402 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:59:01,408 [INFO] app_logger: Список вопросов получен
2025-11-14 20:59:04,360 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:59:04,364 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 20:59:06,675 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 20:59:06,677 [INFO] app_logger: Список вопросов получен
2025-11-14 20:59:06,679 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000001F1114CAC10>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000001F1114CAC10>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-14 20:59:24,361 [INFO] app_logger: Выключение
2025-11-14 20:59:25,258 [INFO] app_logger: Запуск сервера
2025-11-14 20:59:25,258 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 20:59:25,340 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 20:59:25,340 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 20:59:25,353 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 20:59:25,353 [INFO] app_logger: База готова к работе
2025-11-14 21:01:04,869 [INFO] app_logger: Выключение
2025-11-14 21:01:05,748 [INFO] app_logger: Запуск сервера
2025-11-14 21:01:05,748 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 21:01:05,829 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 21:01:05,829 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 21:01:05,842 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 21:01:05,842 [INFO] app_logger: База готова к работе
2025-11-14 21:01:17,461 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:01:17,468 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 21:01:22,578 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:01:22,587 [INFO] app_logger: Список вопросов получен
2025-11-14 21:01:34,648 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:01:34,651 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 21:01:49,066 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:01:49,071 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-14 21:02:27,115 [INFO] app_logger: Выключение
2025-11-14 21:02:27,996 [INFO] app_logger: Запуск сервера
2025-11-14 21:02:27,996 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-14 21:02:28,075 [WARNING] app_logger: Все таблицы удалены.
2025-11-14 21:02:28,075 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-14 21:02:28,087 [INFO] app_logger: Таблицы успешно созданы.
2025-11-14 21:02:28,087 [INFO] app_logger: База готова к работе
2025-11-14 21:02:31,529 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:31,535 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 1
2025-11-14 21:02:31,535 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 22, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 51, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 21:02:35,803 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:35,807 [INFO] app_logger: Создан вопрос с ID 1
2025-11-14 21:02:38,752 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:38,758 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-14 21:02:44,709 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:44,715 [INFO] app_logger: Получен вопрос с ID 1
2025-11-14 21:02:44,719 [INFO] app_logger: Удален вопрос с ID 1 вместе с ответами
2025-11-14 21:02:52,178 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:52,180 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 21:02:52,181 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 33, in get_answer
    return await AnswerRepository.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 91, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 21:02:56,250 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:56,252 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 42, in get_question
    return await QuestionRepository.get_question_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 57, in get_question_by_id
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 21:02:58,720 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:02:58,722 [INFO] app_logger: Создан вопрос с ID 2
2025-11-14 21:03:02,237 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:03:02,239 [WARNING] app_logger: Попытка добавить ответ к несуществующему вопросу ID 1
2025-11-14 21:03:02,240 [ERROR] app_logger: Ошибка при создании сессии: 404: Вопрос не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 22, in add_answer
    return await AnswerRepository.addition_answer(id, data, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 51, in addition_answer
    raise HTTPException(status_code=404, detail="Вопрос не найден")
fastapi.exceptions.HTTPException: 404: Вопрос не найден
2025-11-14 21:03:09,713 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:03:09,716 [INFO] app_logger: Создан ответ с ID 2 для вопроса 2
2025-11-14 21:03:12,167 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:03:12,168 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 21:03:12,168 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 33, in get_answer
    return await AnswerRepository.get_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 91, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 21:03:16,153 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:03:16,154 [INFO] app_logger: Получен ответ с ID 2
2025-11-14 21:03:30,966 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:03:30,968 [WARNING] app_logger: Ответ с ID 1 не найден
2025-11-14 21:03:30,969 [ERROR] app_logger: Ошибка при создании сессии: 404: Ответ не найден
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 30, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\answer.py", line 44, in delete_answer
    return await AnswerRepository.delete_answer_by_id(id, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 115, in delete_answer_by_id
    await cls.get_answer_by_id(answer_id, session)
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\answer\crud.py", line 91, in get_answer_by_id
    raise HTTPException(status_code=404, detail="Ответ не найден")
fastapi.exceptions.HTTPException: 404: Ответ не найден
2025-11-14 21:03:35,903 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-14 21:03:35,904 [INFO] app_logger: Получен ответ с ID 2
2025-11-14 21:03:35,906 [INFO] app_logger: Удалён ответ с ID 2
2025-11-14 21:03:45,398 [INFO] app_logger: Выключение
2025-11-15 12:15:23,031 [INFO] app_logger: Запуск сервера
2025-11-15 12:15:23,031 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-15 12:15:23,237 [WARNING] app_logger: Все таблицы удалены.
2025-11-15 12:15:23,237 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-15 12:15:23,264 [INFO] app_logger: Таблицы успешно созданы.
2025-11-15 12:15:23,264 [INFO] app_logger: База готова к работе
2025-11-15 12:16:38,793 [INFO] app_logger: Выключение
2025-11-15 12:16:39,664 [INFO] app_logger: Запуск сервера
2025-11-15 12:16:39,664 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-15 12:16:39,749 [WARNING] app_logger: Все таблицы удалены.
2025-11-15 12:16:39,749 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-15 12:16:39,761 [INFO] app_logger: Таблицы успешно созданы.
2025-11-15 12:16:39,761 [INFO] app_logger: База готова к работе
2025-11-15 12:16:45,247 [INFO] app_logger: Выключение
2025-11-15 12:24:29,338 [INFO] app_logger: Запуск сервера
2025-11-15 12:24:29,339 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-15 12:24:29,421 [WARNING] app_logger: Все таблицы удалены.
2025-11-15 12:24:29,421 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-15 12:24:29,432 [INFO] app_logger: Таблицы успешно созданы.
2025-11-15 12:24:29,433 [INFO] app_logger: База готова к работе
2025-11-15 12:25:41,378 [INFO] app_logger: Выключение
2025-11-15 12:27:41,594 [INFO] app_logger: Запуск сервера
2025-11-15 12:27:41,595 [WARNING] app_logger: Удаление всех таблиц из базы данных...
2025-11-15 12:27:41,675 [WARNING] app_logger: Все таблицы удалены.
2025-11-15 12:27:41,675 [INFO] app_logger: Создание таблиц в базе данных...
2025-11-15 12:27:41,687 [INFO] app_logger: Таблицы успешно созданы.
2025-11-15 12:27:41,687 [INFO] app_logger: База готова к работе
2025-11-15 12:28:07,043 [INFO] app_logger: Выключение
2025-11-15 12:31:29,623 [INFO] app_logger: Запуск сервера
2025-11-15 12:31:29,623 [INFO] app_logger: База готова к работе
2025-11-15 12:49:12,403 [INFO] app_logger: Выключение
2025-11-15 12:49:13,348 [INFO] app_logger: Запуск сервера
2025-11-15 12:49:13,348 [INFO] app_logger: База готова к работе
2025-11-15 12:49:34,829 [INFO] app_logger: Выключение
2025-11-15 12:49:35,786 [INFO] app_logger: Запуск сервера
2025-11-15 12:49:35,787 [INFO] app_logger: База готова к работе
2025-11-15 12:51:51,834 [INFO] app_logger: Выключение
2025-11-15 12:51:52,757 [INFO] app_logger: Запуск сервера
2025-11-15 12:51:52,757 [INFO] app_logger: База готова к работе
2025-11-15 12:51:55,862 [INFO] app_logger: Выключение
2025-11-15 12:51:56,748 [INFO] app_logger: Запуск сервера
2025-11-15 12:51:56,748 [INFO] app_logger: База готова к работе
2025-11-15 12:52:30,416 [INFO] app_logger: Выключение
2025-11-15 12:52:31,350 [INFO] app_logger: Запуск сервера
2025-11-15 12:54:02,505 [INFO] app_logger: Выключение
2025-11-15 12:54:03,431 [INFO] app_logger: Запуск сервера
2025-11-15 12:54:24,039 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 12:54:24,116 [INFO] app_logger: Создан вопрос с ID 1
2025-11-15 12:54:34,564 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 12:54:34,573 [INFO] app_logger: Создан ответ с ID 1 для вопроса 1
2025-11-15 12:56:44,881 [INFO] app_logger: Выключение
2025-11-15 12:56:45,815 [INFO] app_logger: Запуск сервера
2025-11-15 12:57:15,385 [INFO] app_logger: Выключение
2025-11-15 13:43:10,943 [INFO] app_logger: Запуск сервера
2025-11-15 13:43:17,981 [INFO] app_logger: Выключение
2025-11-15 17:28:41,714 [INFO] app_logger: Запуск сервера
2025-11-15 17:29:15,136 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:29:15,335 [INFO] app_logger: Список вопросов получен
2025-11-15 17:29:42,510 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:29:42,514 [INFO] app_logger: Получен вопрос с ID 1
2025-11-15 17:30:29,368 [INFO] app_logger: Выключение
2025-11-15 17:30:30,193 [INFO] app_logger: Запуск сервера
2025-11-15 17:30:36,918 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:30:36,993 [INFO] app_logger: Список вопросов получен
2025-11-15 17:30:36,996 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x0000020344DCACF0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 29, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x0000020344DCACF0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-15 17:30:45,167 [INFO] app_logger: Выключение
2025-11-15 17:30:46,072 [INFO] app_logger: Запуск сервера
2025-11-15 17:30:52,418 [INFO] app_logger: Выключение
2025-11-15 17:30:53,355 [INFO] app_logger: Запуск сервера
2025-11-15 17:30:58,086 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:30:58,087 [ERROR] app_logger: Ошибка при создании сессии: 
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 29, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 290, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\routes\questions.py", line 21, in get_all_questions
    return await QuestionRepository.all_questions(session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\repositories\questions\crud.py", line 25, in all_questions
    query = select(cls.model).options(selectinload())
                                      ~~~~~~~~~~~~^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\strategy_options.py", line 2447, in selectinload
    return _generate_from_keys(
        Load.selectinload, keys, False, {"recursion_depth": recursion_depth}
    )
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\sqlalchemy\orm\strategy_options.py", line 2339, in _generate_from_keys
    assert lead_element
           ^^^^^^^^^^^^
AssertionError
2025-11-15 17:32:05,508 [INFO] app_logger: Выключение
2025-11-15 17:32:06,406 [INFO] app_logger: Запуск сервера
2025-11-15 17:32:10,386 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:32:10,465 [INFO] app_logger: Список вопросов получен
2025-11-15 17:33:23,062 [INFO] app_logger: Выключение
2025-11-15 17:33:23,922 [INFO] app_logger: Запуск сервера
2025-11-15 17:34:02,100 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:34:02,282 [INFO] app_logger: Список вопросов получен
2025-11-15 17:34:02,285 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x00000181B35FAF90>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 29, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x00000181B35FAF90>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-15 17:35:07,312 [INFO] app_logger: Выключение
2025-11-15 17:35:08,159 [INFO] app_logger: Запуск сервера
2025-11-15 17:35:15,540 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:35:15,616 [INFO] app_logger: Список вопросов получен
2025-11-15 17:35:25,850 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:35:25,859 [INFO] app_logger: Получен вопрос с ID 1
2025-11-15 17:36:37,709 [INFO] app_logger: Выключение
2025-11-15 17:36:38,661 [INFO] app_logger: Запуск сервера
2025-11-15 17:36:39,422 [INFO] app_logger: Выключение
2025-11-15 17:37:23,869 [INFO] app_logger: Запуск сервера
2025-11-15 17:39:06,428 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:39:06,603 [INFO] app_logger: Список вопросов получен
2025-11-15 17:39:06,606 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000002354AE96660>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 29, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000002354AE96660>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-15 17:39:12,406 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:39:12,412 [INFO] app_logger: Получен вопрос с ID 1
2025-11-15 17:40:03,312 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:40:03,313 [INFO] app_logger: Список вопросов получен
2025-11-15 17:40:03,315 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000002354AE9E0D0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 29, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000002354AE9E0D0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-15 17:40:09,576 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:40:09,579 [INFO] app_logger: Получен вопрос с ID 1
2025-11-15 17:40:28,601 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:40:28,604 [INFO] app_logger: Получен вопрос с ID 1
2025-11-15 17:40:34,869 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:40:34,870 [INFO] app_logger: Список вопросов получен
2025-11-15 17:40:34,871 [ERROR] app_logger: Ошибка при создании сессии: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000002354AEC3890>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
Traceback (most recent call last):
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\app\database\db_helper.py", line 29, in get_session
    yield session
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 413, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\maxva\PycharmProjects\Im\fastapi_tz\.venv\Lib\site-packages\fastapi\routing.py", line 254, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'answers'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.database.models.QuestionModels object at 0x000002354AEC3890>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

2025-11-15 17:46:24,748 [INFO] app_logger: Запуск сервера
2025-11-15 17:46:31,742 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:46:31,819 [INFO] app_logger: Список вопросов получен
2025-11-15 17:46:41,791 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:46:41,798 [INFO] app_logger: Получен вопрос с ID 1
2025-11-15 17:49:52,365 [INFO] app_logger: Выключение
2025-11-15 17:49:53,257 [INFO] app_logger: Запуск сервера
2025-11-15 17:50:20,161 [INFO] app_logger: Выключение
2025-11-15 17:50:50,162 [INFO] app_logger: Запуск сервера
2025-11-15 17:50:58,030 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:50:58,108 [INFO] app_logger: Список вопросов получен
2025-11-15 17:51:05,373 [DEBUG] app_logger: Создана новая асинхронная сессия базы данных.
2025-11-15 17:51:05,381 [INFO] app_logger: Получен вопрос с ID 1
